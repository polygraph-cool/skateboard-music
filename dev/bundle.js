/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _lodash = __webpack_require__(1);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _isMobile = __webpack_require__(3);\n\nvar _isMobile2 = _interopRequireDefault(_isMobile);\n\nvar _graphic = __webpack_require__(4);\n\nvar _graphic2 = _interopRequireDefault(_graphic);\n\nvar _joyplot = __webpack_require__(5);\n\nvar _joyplot2 = _interopRequireDefault(_joyplot);\n\nvar _bubbles = __webpack_require__(6);\n\nvar _bubbles2 = _interopRequireDefault(_bubbles);\n\nvar _waffle = __webpack_require__(7);\n\nvar _waffle2 = _interopRequireDefault(_waffle);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// D3 is included by globally by default\nvar bodySel = d3.select('body');\nvar previousWidth = 0;\n\nfunction resize() {\n\tvar width = bodySel.node().offsetWidth;\n\tif (previousWidth !== width) {\n\t\tpreviousWidth = width;\n\t\t_graphic2.default.resize();\n\t}\n}\n\nfunction init() {\n\tvar soundWrapper = d3.select(\".sound-wrapper\");\n\n\tsoundWrapper.on(\"click\", function (d) {\n\t\tvar videoNode = d3.select(\".intro_video\").select(\"video\").node();\n\t\tif (videoNode.muted) {\n\t\t\tvideoNode.muted = false;\n\t\t\tsoundWrapper.select(\".sound-on\").style(\"display\", \"none\");\n\t\t\tsoundWrapper.select(\".sound-off\").style(\"display\", \"block\");\n\t\t} else {\n\t\t\tvideoNode.muted = true;\n\t\t\tsoundWrapper.select(\".sound-on\").style(\"display\", null);\n\t\t\tsoundWrapper.select(\".sound-off\").style(\"display\", null);\n\t\t}\n\t});\n\t// add mobile class to body tag\n\tbodySel.classed('is-mobile', _isMobile2.default.any());\n\t// setup resize event\n\twindow.addEventListener('resize', (0, _lodash2.default)(resize, 150));\n\t//\n\t//joyplot enter\n\t_joyplot2.default.init();\n\t//\n\t// //new_test enter\n\t_bubbles2.default.init();\n\t//\n\t// //waffle chart\n\t_waffle2.default.init();\n}\n\ninit();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvZW50cnkuanM/YjE2NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEMyBpcyBpbmNsdWRlZCBieSBnbG9iYWxseSBieSBkZWZhdWx0XG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoLmRlYm91bmNlJztcbmltcG9ydCBpc01vYmlsZSBmcm9tICcuL3V0aWxzL2lzLW1vYmlsZSc7XG5pbXBvcnQgZ3JhcGhpYyBmcm9tICcuL2dyYXBoaWMnO1xuaW1wb3J0IGpveXBsb3QgZnJvbSAnLi9qb3lwbG90JztcbmltcG9ydCBidWJibGVzIGZyb20gJy4vYnViYmxlcyc7XG5pbXBvcnQgd2FmZmxlIGZyb20gJy4vd2FmZmxlJztcblxuY29uc3QgYm9keVNlbCA9IGQzLnNlbGVjdCgnYm9keScpO1xubGV0IHByZXZpb3VzV2lkdGggPSAwO1xuXG5mdW5jdGlvbiByZXNpemUoKSB7XG5cdGNvbnN0IHdpZHRoID0gYm9keVNlbC5ub2RlKCkub2Zmc2V0V2lkdGg7XG5cdGlmIChwcmV2aW91c1dpZHRoICE9PSB3aWR0aCkge1xuXHRcdHByZXZpb3VzV2lkdGggPSB3aWR0aDtcblx0XHRncmFwaGljLnJlc2l6ZSgpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG5cdHZhciBzb3VuZFdyYXBwZXIgPSBkMy5zZWxlY3QoXCIuc291bmQtd3JhcHBlclwiKTtcblxuXHRzb3VuZFdyYXBwZXIub24oXCJjbGlja1wiLGZ1bmN0aW9uKGQpe1xuXHRcdHZhciB2aWRlb05vZGUgPSBkMy5zZWxlY3QoXCIuaW50cm9fdmlkZW9cIikuc2VsZWN0KFwidmlkZW9cIikubm9kZSgpO1xuXHRcdGlmKHZpZGVvTm9kZS5tdXRlZCl7XG5cdFx0XHR2aWRlb05vZGUubXV0ZWQgPSBmYWxzZTtcblx0XHRcdHNvdW5kV3JhcHBlci5zZWxlY3QoXCIuc291bmQtb25cIikuc3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpO1xuXHRcdFx0c291bmRXcmFwcGVyLnNlbGVjdChcIi5zb3VuZC1vZmZcIikuc3R5bGUoXCJkaXNwbGF5XCIsXCJibG9ja1wiKTtcblx0XHR9XG5cdFx0ZWxzZXtcblx0XHRcdHZpZGVvTm9kZS5tdXRlZCA9IHRydWU7XG5cdFx0XHRzb3VuZFdyYXBwZXIuc2VsZWN0KFwiLnNvdW5kLW9uXCIpLnN0eWxlKFwiZGlzcGxheVwiLG51bGwpO1xuXHRcdFx0c291bmRXcmFwcGVyLnNlbGVjdChcIi5zb3VuZC1vZmZcIikuc3R5bGUoXCJkaXNwbGF5XCIsbnVsbCk7XG5cdFx0fVxuXHR9KVxuXHQvLyBhZGQgbW9iaWxlIGNsYXNzIHRvIGJvZHkgdGFnXG5cdGJvZHlTZWwuY2xhc3NlZCgnaXMtbW9iaWxlJywgaXNNb2JpbGUuYW55KCkpO1xuXHQvLyBzZXR1cCByZXNpemUgZXZlbnRcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKHJlc2l6ZSwgMTUwKSk7XG5cdC8vXG5cdC8vam95cGxvdCBlbnRlclxuXHRqb3lwbG90LmluaXQoKTtcblx0Ly9cblx0Ly8gLy9uZXdfdGVzdCBlbnRlclxuXHRidWJibGVzLmluaXQoKVxuXHQvL1xuXHQvLyAvL3dhZmZsZSBjaGFydFxuXHR3YWZmbGUuaW5pdCgpXG5cbn1cblxuaW5pdCgpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy9lbnRyeS5qcyJdLCJtYXBwaW5ncyI6Ijs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQVBBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2Rhc2guZGVib3VuY2UvaW5kZXguanM/Y2I1YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAqIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9sb2Rhc2guZGVib3VuY2UvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports) {

eval("var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanM/MzY5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZztcclxuXHJcbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcbmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn0pKCk7XHJcblxyXG50cnkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxyXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2goZSkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXHJcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcclxuXHRcdGcgPSB3aW5kb3c7XHJcbn1cclxuXHJcbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3NcclxuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n// device sniffing for mobile\n\nvar isMobile = {\n\tandroid: function android() {\n\t\treturn navigator.userAgent.match(/Android/i);\n\t},\n\n\tblackberry: function blackberry() {\n\t\treturn navigator.userAgent.match(/BlackBerry/i);\n\t},\n\n\tios: function ios() {\n\t\treturn navigator.userAgent.match(/iPhone|iPad|iPod/i);\n\t},\n\n\topera: function opera() {\n\t\treturn navigator.userAgent.match(/Opera Mini/i);\n\t},\n\n\twindows: function windows() {\n\t\treturn navigator.userAgent.match(/IEMobile/i);\n\t},\n\n\tany: function any() {\n\t\treturn isMobile.android() || isMobile.blackberry() || isMobile.ios() || isMobile.opera() || isMobile.windows();\n\t}\n};\n\nexports.default = isMobile;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdXRpbHMvaXMtbW9iaWxlLmpzPzY1NGMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZGV2aWNlIHNuaWZmaW5nIGZvciBtb2JpbGVcblxuY29uc3QgaXNNb2JpbGUgPSB7XG5cdGFuZHJvaWQ6ICgpID0+IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSksXG5cblx0YmxhY2tiZXJyeTogKCkgPT4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKSxcblxuXHRpb3M6ICgpID0+IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZXxpUGFkfGlQb2QvaSksXG5cblx0b3BlcmE6ICgpID0+IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL09wZXJhIE1pbmkvaSksXG5cblx0d2luZG93czogKCkgPT4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvSUVNb2JpbGUvaSksXG5cblx0YW55OiAoKSA9PiAoXG5cdFx0aXNNb2JpbGUuYW5kcm9pZCgpIHx8XG5cdFx0aXNNb2JpbGUuYmxhY2tiZXJyeSgpIHx8XG5cdFx0aXNNb2JpbGUuaW9zKCkgfHxcblx0XHRpc01vYmlsZS5vcGVyYSgpIHx8XG5cdFx0aXNNb2JpbGUud2luZG93cygpXG5cdCksXG59XG5cbmV4cG9ydCBkZWZhdWx0IGlzTW9iaWxlXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL3V0aWxzL2lzLW1vYmlsZS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBWEE7QUFDQTtBQW1CQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n// D3 is included by globally by default\n\nfunction resize() {}\n\nfunction init() {\n\t// console.log('Make somethingjk!');\n}\n\nexports.default = { init: init, resize: resize };//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvZ3JhcGhpYy5qcz8xZTZkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEQzIGlzIGluY2x1ZGVkIGJ5IGdsb2JhbGx5IGJ5IGRlZmF1bHRcblxuZnVuY3Rpb24gcmVzaXplKCkge31cblxuZnVuY3Rpb24gaW5pdCgpIHtcblx0Ly8gY29uc29sZS5sb2coJ01ha2Ugc29tZXRoaW5namshJyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgaW5pdCwgcmVzaXplIH07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL2dyYXBoaWMuanMiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tracker;\nvar trackerOne;\nvar trackerTwo;\nvar trackerRect;\nvar xScale;\n\nvar viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\nvar viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nfunction resize() {}\n\nfunction testStoryCode() {\n  var container = d3.select('#scroll');\n  var graphic = container.select('.scroll__graphic');\n  var chart = graphic.select('.chart');\n  var text = container.select('.scroll__text');\n  var step = text.selectAll('.step');\n\n  var margin = { top: 50, right: 10, bottom: 50, left: 150 },\n      width = d3.select('div.chart').node().offsetWidth - margin.left - margin.right;\n  console.log(width);\n\n  var scroller = scrollama();\n\n  // generic window resize listener event\n  function handleResize() {}\n\n  // scrollama event handlers\n  function handleStepEnter(_ref) {\n    var element = _ref.element,\n        direction = _ref.direction,\n        index = _ref.index;\n\n\n    var response = { element: element, direction: direction, index: index };\n    var dataYear = response.element.dataset.year;\n    var conv_date = new Date(dataYear);\n    var stepIndex = response.index;\n    if (stepIndex > 0) {\n      tracker.style(\"visibility\", \"visible\").style(\"opacity\", 1);\n    } else {\n      tracker.style(\"visibility\", null).style(\"opacity\", 0);\n    }\n\n    if (stepIndex == 1) {\n      trackerOne.transition().duration(0).transition().duration(250).attr(\"x1\", xScale(new Date(1989, 0, 1))).attr(\"x2\", xScale(new Date(1989, 0, 1)));\n\n      trackerTwo.transition().duration(0).transition().duration(250).attr(\"x1\", xScale(new Date(1990, 0, 1))).attr(\"x2\", xScale(new Date(1990, 0, 1)));\n\n      trackerRect.transition().duration(0).transition().duration(250).attr(\"width\", function (d) {\n        return xScale(new Date(1990, 0, 1)) - xScale(new Date(1989, 0, 1));\n      }).attr(\"x\", xScale(conv_date));\n    } else if (stepIndex == 2) {\n      trackerOne.transition().duration(0).transition().duration(250).attr(\"x1\", xScale(new Date(1990, 0, 1))).attr(\"x2\", xScale(new Date(1990, 0, 1)));\n\n      trackerTwo.transition().duration(0).transition().duration(250).attr(\"x1\", xScale(new Date(1999, 0, 1))).attr(\"x2\", xScale(new Date(1999, 0, 1)));\n\n      trackerRect.transition().duration(0).transition().duration(250).attr(\"width\", function (d) {\n        return xScale(new Date(1999, 0, 1)) - xScale(new Date(1990, 0, 1));\n      }).attr(\"x\", xScale(new Date(1990, 0, 1)));\n    } else if (stepIndex == 3) {\n      trackerOne.transition().duration(0).transition().duration(250).attr(\"x1\", xScale(new Date(2000, 0, 1))).attr(\"x2\", xScale(new Date(2000, 0, 1)));\n\n      trackerTwo.transition().duration(0).transition().duration(250).attr(\"x1\", xScale(new Date(2003, 0, 1))).attr(\"x2\", xScale(new Date(2003, 0, 1)));\n\n      trackerRect.transition().duration(0).transition().duration(250).attr(\"width\", function (d) {\n        return xScale(new Date(2003, 0, 1)) - xScale(new Date(2000, 0, 1));\n      }).attr(\"x\", xScale(new Date(2000, 0, 1)));\n    } else if (stepIndex == 4) {\n      trackerOne.transition().duration(0).transition().duration(250).attr(\"x1\", xScale(new Date(2015, 0, 1))).attr(\"x2\", xScale(new Date(2015, 0, 1)));\n\n      trackerTwo.transition().duration(0).transition().duration(250).attr(\"x1\", xScale(new Date(2017, 0, 1))).attr(\"x2\", xScale(new Date(2017, 0, 1)));\n\n      trackerRect.transition().duration(0).transition().duration(250).attr(\"width\", function (d) {\n        return xScale(new Date(2017, 0, 1)) - xScale(new Date(2015, 0, 1));\n      }).attr(\"x\", xScale(new Date(2015, 0, 1)));\n    }\n\n    // d3.selectAll('rect#maskRect')\n    //   .transition()\n    //   .duration(2500)\n    //   .attr('x', function(d) {\n    //     return xScale(conv_date);\n    //   });\n  }\n  function handleContainerEnter(response) {\n    // response = { direction }\n    // sticky the graphic (old school)\n    graphic.classed('is-fixed', true);\n    graphic.classed('is-bottom', false);\n  }\n  function handleContainerExit(response) {\n    // response = { direction }\n    // un-sticky the graphic, and pin to top/bottom of container\n    graphic.classed('is-fixed', false);\n    graphic.classed('is-bottom', response.direction === 'down');\n  }\n\n  function init() {\n    // 1. force a resize on load to ensure proper dimensions are sent to scrollama\n    handleResize();\n    // 2. setup the scroller passing options\n    // this will also initialize trigger observations\n    // 3. bind scrollama event handlers (this can be chained like below)\n    scroller.setup({\n      container: '#scroll',\n      graphic: '.scroll__graphic',\n      text: '.scroll__text',\n      step: '.scroll__text .step',\n      debug: false, // uncomment to have interactive debug\n      offset: .5\n    }).onStepEnter(handleStepEnter).onContainerEnter(handleContainerEnter).onContainerExit(handleContainerExit);\n    // setup resize event\n    window.addEventListener('resize', handleResize);\n  }\n  // kick things off\n  init();\n}\n\nfunction init() {\n\n  var container = d3.select(\".joyplot\");\n\n  var windowHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\n  windowHeight = Math.min(400, windowHeight);\n\n  var windowWidth = Math.min(container.node().offsetWidth, 500);\n  if (viewportWidth < 950) {\n    windowWidth = Math.min(container.node().offsetWidth, Math.round(viewportWidth * .9));\n    // console.log(container.node().offsetWidth,);\n    // console.log(windowWidth);\n  }\n\n  var margin = { top: 40, right: 10, bottom: 50, left: 150 };\n  if (viewportWidth < 400) {\n    margin.left = 100;\n  }\n  var width = windowWidth - margin.left - margin.right;\n  var height = windowHeight - margin.top - margin.bottom;\n\n  var svg = d3.selectAll('.joyplot').append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  // NEED TO FIGURE THIS OUT\n  var formatTime = d3.timeFormat('%Y');\n\n  // Function to return d.time\n  var x = function x(d) {\n    return d.time;\n  };\n  xScale = d3.scaleTime().range([0, width]);\n  var xValue = function xValue(d) {\n    return xScale(x(d));\n  };\n  var xAxis = d3.axisBottom(xScale).tickFormat(formatTime).ticks(10);\n\n  var y = function y(d) {\n    return d.value;\n  };\n  var yScale = d3.scaleLinear();\n  var yValue = function yValue(d) {\n    return yScale(y(d)) + 0;\n  };\n\n  var genre = function genre(d) {\n    return d.key;\n  };\n  var genreScale = d3.scaleBand().range([0, height]);\n  var genreValue = function genreValue(d) {\n    return genreScale(genre(d));\n  };\n\n  var genreAxis = d3.axisLeft(genreScale);\n\n  var area = d3.area().x(xValue).y1(yValue);\n\n  var line = area.lineY1();\n\n  var parseTime = d3.timeParse('%Y');\n\n  function row(d) {\n    return {\n      activity: d.activity,\n      time: parseTime(+d.time),\n      value: +d.p_smooth\n    };\n  }\n\n  d3.tsv('assets/cities.tsv', row, function (error, dataFlat) {\n\n    if (error) throw error;\n    // Sort x-axis by time\n    dataFlat.sort(function (a, b) {\n      return a.time - b.time;\n    });\n\n    var yearFormat = d3.timeFormat(\"%Y\");\n\n    dataFlat = dataFlat.filter(function (d) {\n      return +yearFormat(d.time) > 1988 && +yearFormat(d.time) < 2018;\n    });\n\n    var data = d3.nest().key(function (d) {\n      return d.activity;\n    }).entries(dataFlat);\n\n    // Place activities based in order of max peak time\n    function peakTime(d) {\n      var i = d3.scan(d.values, function (a, b) {\n        return y(a) - y(b);\n      });\n      return d.values[i].time;\n    };\n\n    // Sort activities by use\n    var genreDomain = [\"Indie/Alternative\", \"Hip Hop\", \"Punk\", \"Classic Rock\", \"Jazz/Soul\", \"Other\", \"Electronic\", \"Metal\", \"Rock\"];\n\n    data.sort(function (a, b) {\n      return genreDomain.indexOf(a.key) - genreDomain.indexOf(b.key);\n    });\n\n    xScale.domain(d3.extent(dataFlat, x));\n\n    genreScale.domain(genreDomain);\n\n    var overlap = 2;\n    var areaChartHeight = (1 + overlap) * (height / genreScale.domain().length);\n\n    yScale.domain(d3.extent(dataFlat, y)).range([areaChartHeight, 0]);\n\n    area.y0(yScale(0));\n\n    // // set y-axis labels\n    var gGenre = svg.append('g').attr('class', 'activities').selectAll('.activity').data(data).enter().append('g').attr('class', function (d) {\n      return 'activity activity--' + d.key;\n    }).attr('transform', function (d) {\n      // var ty = genreValue(d) - genreScale.bandwidth();\n      var ty = genreValue(d) - Math.round(areaChartHeight);\n      return 'translate(0,' + ty + ')';\n    });\n\n    var textColor = 0;\n    var areaColor = 0;\n\n    gGenre.append('g').attr('transform', function (d) {\n      var ty = Math.round(areaChartHeight) + genreScale.domain().length * 1.5 - 10;\n      return 'translate(-25,' + ty + ')';\n    }).append('text').html(function (d) {\n      return d.key;\n    }).attr('fill', function (d) {\n      var color = d3.color(d3.interpolateCool(textColor)).brighter(0);\n      textColor = textColor + 1 / 9;\n      return color;\n    }).attr(\"text-anchor\", \"end\");\n\n    gGenre.append('g').attr('transform', function (d) {\n      var endValue = d.values[d.values.length - 1];\n\n      var ty = Math.round(areaChartHeight) + genreScale.domain().length * 1.5 - 10;\n      return 'translate(' + (width + 4) + ',' + yScale(y(endValue)) + ')';\n    }).append('text').html(function (d) {\n      var values = d.values;\n      return Math.round(d.values[d.values.length - 1].value * 100) + \"%\";\n    }).attr('fill', function (d) {\n      return \"white\";\n    }).attr(\"class\", \"percent-annotation\").attr(\"text-anchor\", \"start\");\n\n    gGenre.append('path').attr('class', 'area').datum(function (d) {\n      return d.values;\n    }).filter(function (d) {\n      var tt = d.filter(function (d) {\n        return formatTime(d.time) < 1995;\n      });\n      return tt;\n    }).attr('d', area).style(\"fill\", function (d) {\n      var color = d3.color(d3.interpolateCool(areaColor)).darker(2);\n      areaColor = areaColor + 1 / 9;\n      return color;\n\n      return \"red\";\n    });\n\n    gGenre.append('path').attr('class', 'line').datum(function (d) {\n      return d.values;\n    }).attr('d', line).attr('stroke', 'white').style('opacity', 1);\n\n    gGenre.append('line').attr('class', 'line-bottom').datum(function (d) {\n      return d.values;\n    }).attr(\"x1\", -10).attr(\"x2\", width + 10).attr(\"y1\", 0).attr(\"y2\", 0).attr('transform', function (d) {\n      var ty = Math.round(areaChartHeight) + genreScale.domain().length * 1.5 - 10;\n      return 'translate(-10,' + ty + ')';\n    }).attr('stroke', 'white').style('opacity', 1);\n\n    tracker = svg.append(\"g\").attr(\"class\", \"markTracker\");\n\n    trackerOne = tracker.append('line').attr(\"x1\", function (d) {\n      return xScale(new Date(1989, 0, 1));\n    }).attr(\"x2\", function (d) {\n      return xScale(new Date(1989, 0, 1));\n    }).attr(\"y1\", -100).attr(\"y2\", height + 20).attr('class', \"maskLine\");\n\n    trackerRect = tracker.append('rect').attr(\"x\", function (d) {\n      return xScale(new Date(1989, 0, 1));\n    }).attr(\"y\", -100).attr(\"width\", function (d) {\n      return xScale(new Date(1990, 0, 1)) - xScale(new Date(1989, 0, 1));\n    }).attr(\"height\", function (d) {\n      return height + 20 + 100;\n    }).attr('class', \"maskRect\");\n\n    trackerTwo = tracker.append('line').attr(\"x1\", function (d) {\n      return xScale(new Date(1990, 0, 1));\n    }).attr(\"x2\", function (d) {\n      return xScale(new Date(1990, 0, 1));\n    }).attr(\"y1\", -100).attr(\"y2\", height + 20).attr('class', \"maskLine\");\n\n    //     .attr('width', d3.select('div.joyplot').node().offsetWidth)\n    //     .attr('height', d3.select('div.chart').node().offsetHeight) // was divided by 2.7 => bad\n    //     .attr('id', 'maskRect')\n    //     .attr('opacity', 1);\n\n    svg.append('g').attr('class', 'axis axis--x').attr('transform', 'translate(0,' + (height - 20) + ')').call(xAxis).selectAll(\"text\").attr(\"y\", 13);\n\n    // Remove years in x-axis for which no data actually exists\n    d3.selectAll(\".tick text\").each(function (d, i) {\n      if (viewportWidth < 400) {\n        if (i % 3 == 0 || i == 0) {\n          d3.select(this).attr('visibility', 'visible');\n        } else {\n          d3.select(this).attr('visibility', 'hidden');\n        }\n      } else if (i % 2 != 0) {\n        d3.select(this).attr('visibility', 'hidden');\n      }\n    });\n\n    d3.selectAll('.tick').each(function (d, i) {\n      if (viewportWidth < 400) {\n        if (i % 3 == 0 || i == 0) {\n          d3.select(this).attr('visibility', 'visible');\n        } else {\n          d3.select(this).attr('visibility', 'hidden');\n        }\n      } else if (i % 2 != 0) {\n        d3.select(this).attr('visibility', 'hidden');\n      }\n    });\n\n    // svg\n    //     .append('text')\n    //     .attr('class', 'joytitle')\n    //     .attr('x', width / 2)\n    //     .attr('y', 10)\n    //     .attr('fill', 'white')\n    //     .style('font-size', '40px')\n    //     .text('title');\n  });\n\n  testStoryCode();\n}\n\nexports.default = { init: init, resize: resize };//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvam95cGxvdC5qcz9hNDE2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciB0cmFja2VyO1xudmFyIHRyYWNrZXJPbmU7XG52YXIgdHJhY2tlclR3bztcbnZhciB0cmFja2VyUmVjdDtcbnZhciB4U2NhbGU7XG5cbnZhciB2aWV3cG9ydFdpZHRoID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCB8fCAwKTtcbnZhciB2aWV3cG9ydEhlaWdodCA9IE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsIHdpbmRvdy5pbm5lckhlaWdodCB8fCAwKTtcblxuXG5mdW5jdGlvbiByZXNpemUoKSB7fVxuXG5mdW5jdGlvbiB0ZXN0U3RvcnlDb2RlKCl7XG4gIHZhciBjb250YWluZXIgPSBkMy5zZWxlY3QoJyNzY3JvbGwnKTtcbiAgdmFyIGdyYXBoaWMgPSBjb250YWluZXIuc2VsZWN0KCcuc2Nyb2xsX19ncmFwaGljJyk7XG4gIHZhciBjaGFydCA9IGdyYXBoaWMuc2VsZWN0KCcuY2hhcnQnKTtcbiAgdmFyIHRleHQgPSBjb250YWluZXIuc2VsZWN0KCcuc2Nyb2xsX190ZXh0Jyk7XG4gIHZhciBzdGVwID0gdGV4dC5zZWxlY3RBbGwoJy5zdGVwJyk7XG5cbiAgdmFyIG1hcmdpbiA9IHsgdG9wOiA1MCwgcmlnaHQ6IDEwLCBib3R0b206IDUwLCBsZWZ0OiAxNTAgfSxcbiAgICAgIHdpZHRoID0gZDMuc2VsZWN0KCdkaXYuY2hhcnQnKS5ub2RlKCkub2Zmc2V0V2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodDtcbiAgICAgIGNvbnNvbGUubG9nKHdpZHRoKTtcblxuICB2YXIgc2Nyb2xsZXIgPSBzY3JvbGxhbWEoKTtcblxuICAvLyBnZW5lcmljIHdpbmRvdyByZXNpemUgbGlzdGVuZXIgZXZlbnRcbiAgZnVuY3Rpb24gaGFuZGxlUmVzaXplKCkge1xuICB9XG5cbiAgLy8gc2Nyb2xsYW1hIGV2ZW50IGhhbmRsZXJzXG4gIGZ1bmN0aW9uIGhhbmRsZVN0ZXBFbnRlcih7IGVsZW1lbnQsIGRpcmVjdGlvbiwgaW5kZXggfSkge1xuXG4gICAgdmFyIHJlc3BvbnNlID0geyBlbGVtZW50LCBkaXJlY3Rpb24sIGluZGV4IH1cblx0XHR2YXIgZGF0YVllYXIgPSByZXNwb25zZS5lbGVtZW50LmRhdGFzZXQueWVhcjtcbiAgICB2YXIgY29udl9kYXRlID0gbmV3IERhdGUoZGF0YVllYXIpO1xuICAgIHZhciBzdGVwSW5kZXggPSByZXNwb25zZS5pbmRleFxuICAgIGlmKHN0ZXBJbmRleCA+IDApe1xuICAgICAgdHJhY2tlci5zdHlsZShcInZpc2liaWxpdHlcIixcInZpc2libGVcIikuc3R5bGUoXCJvcGFjaXR5XCIsMSk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICB0cmFja2VyLnN0eWxlKFwidmlzaWJpbGl0eVwiLG51bGwpLnN0eWxlKFwib3BhY2l0eVwiLDApO1xuICAgIH1cblxuICAgIGlmKHN0ZXBJbmRleCA9PSAxKXtcbiAgICAgIHRyYWNrZXJPbmVcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMjUwKVxuICAgICAgICAuYXR0cihcIngxXCIseFNjYWxlKG5ldyBEYXRlKDE5ODksMCwxKSkpXG4gICAgICAgIC5hdHRyKFwieDJcIix4U2NhbGUobmV3IERhdGUoMTk4OSwwLDEpKSlcbiAgICAgICAgO1xuXG4gICAgICB0cmFja2VyVHdvXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDI1MClcbiAgICAgICAgLmF0dHIoXCJ4MVwiLHhTY2FsZShuZXcgRGF0ZSgxOTkwLDAsMSkpKVxuICAgICAgICAuYXR0cihcIngyXCIseFNjYWxlKG5ldyBEYXRlKDE5OTAsMCwxKSkpXG4gICAgICAgIDtcblxuICAgICAgdHJhY2tlclJlY3RcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMjUwKVxuICAgICAgICAuYXR0cihcIndpZHRoXCIsZnVuY3Rpb24oZCl7XG4gICAgICAgICAgcmV0dXJuIHhTY2FsZShuZXcgRGF0ZSgxOTkwLDAsMSkpIC0geFNjYWxlKG5ldyBEYXRlKDE5ODksMCwxKSlcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJ4XCIseFNjYWxlKGNvbnZfZGF0ZSkpXG4gICAgICAgIDtcbiAgICB9XG4gICAgZWxzZSBpZihzdGVwSW5kZXggPT0gMil7XG4gICAgICB0cmFja2VyT25lXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDI1MClcbiAgICAgICAgLmF0dHIoXCJ4MVwiLHhTY2FsZShuZXcgRGF0ZSgxOTkwLDAsMSkpKVxuICAgICAgICAuYXR0cihcIngyXCIseFNjYWxlKG5ldyBEYXRlKDE5OTAsMCwxKSkpXG4gICAgICAgIDtcblxuICAgICAgdHJhY2tlclR3b1xuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbigyNTApXG4gICAgICAgIC5hdHRyKFwieDFcIix4U2NhbGUobmV3IERhdGUoMTk5OSwwLDEpKSlcbiAgICAgICAgLmF0dHIoXCJ4MlwiLHhTY2FsZShuZXcgRGF0ZSgxOTk5LDAsMSkpKVxuICAgICAgICA7XG5cbiAgICAgIHRyYWNrZXJSZWN0XG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDI1MClcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLGZ1bmN0aW9uKGQpe1xuICAgICAgICAgIHJldHVybiB4U2NhbGUobmV3IERhdGUoMTk5OSwwLDEpKSAtIHhTY2FsZShuZXcgRGF0ZSgxOTkwLDAsMSkpXG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKFwieFwiLHhTY2FsZShuZXcgRGF0ZSgxOTkwLDAsMSkpKSAgICAgICAgO1xuICAgIH1cbiAgICBlbHNlIGlmKHN0ZXBJbmRleCA9PSAzKXtcbiAgICAgIHRyYWNrZXJPbmVcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMjUwKVxuICAgICAgICAuYXR0cihcIngxXCIseFNjYWxlKG5ldyBEYXRlKDIwMDAsMCwxKSkpXG4gICAgICAgIC5hdHRyKFwieDJcIix4U2NhbGUobmV3IERhdGUoMjAwMCwwLDEpKSlcbiAgICAgICAgO1xuXG4gICAgICB0cmFja2VyVHdvXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDI1MClcbiAgICAgICAgLmF0dHIoXCJ4MVwiLHhTY2FsZShuZXcgRGF0ZSgyMDAzLDAsMSkpKVxuICAgICAgICAuYXR0cihcIngyXCIseFNjYWxlKG5ldyBEYXRlKDIwMDMsMCwxKSkpXG4gICAgICAgIDtcblxuICAgICAgdHJhY2tlclJlY3RcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMjUwKVxuICAgICAgICAuYXR0cihcIndpZHRoXCIsZnVuY3Rpb24oZCl7XG4gICAgICAgICAgcmV0dXJuIHhTY2FsZShuZXcgRGF0ZSgyMDAzLDAsMSkpIC0geFNjYWxlKG5ldyBEYXRlKDIwMDAsMCwxKSlcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJ4XCIseFNjYWxlKG5ldyBEYXRlKDIwMDAsMCwxKSkpXG4gICAgfVxuICAgIGVsc2UgaWYoc3RlcEluZGV4ID09IDQpe1xuICAgICAgdHJhY2tlck9uZVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbigyNTApXG4gICAgICAgIC5hdHRyKFwieDFcIix4U2NhbGUobmV3IERhdGUoMjAxNSwwLDEpKSlcbiAgICAgICAgLmF0dHIoXCJ4MlwiLHhTY2FsZShuZXcgRGF0ZSgyMDE1LDAsMSkpKVxuICAgICAgICA7XG5cbiAgICAgIHRyYWNrZXJUd29cbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMjUwKVxuICAgICAgICAuYXR0cihcIngxXCIseFNjYWxlKG5ldyBEYXRlKDIwMTcsMCwxKSkpXG4gICAgICAgIC5hdHRyKFwieDJcIix4U2NhbGUobmV3IERhdGUoMjAxNywwLDEpKSlcbiAgICAgICAgO1xuXG4gICAgICB0cmFja2VyUmVjdFxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbigyNTApXG4gICAgICAgIC5hdHRyKFwid2lkdGhcIixmdW5jdGlvbihkKXtcbiAgICAgICAgICByZXR1cm4geFNjYWxlKG5ldyBEYXRlKDIwMTcsMCwxKSkgLSB4U2NhbGUobmV3IERhdGUoMjAxNSwwLDEpKVxuICAgICAgICB9KVxuICAgICAgICAuYXR0cihcInhcIix4U2NhbGUobmV3IERhdGUoMjAxNSwwLDEpKSlcbiAgICB9XG5cblxuXG4gICAgLy8gZDMuc2VsZWN0QWxsKCdyZWN0I21hc2tSZWN0JylcbiAgICAvLyAgIC50cmFuc2l0aW9uKClcbiAgICAvLyAgIC5kdXJhdGlvbigyNTAwKVxuICAgIC8vICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkKSB7XG4gICAgLy8gICAgIHJldHVybiB4U2NhbGUoY29udl9kYXRlKTtcbiAgICAvLyAgIH0pO1xuXG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlQ29udGFpbmVyRW50ZXIocmVzcG9uc2UpIHtcbiAgICAvLyByZXNwb25zZSA9IHsgZGlyZWN0aW9uIH1cbiAgICAvLyBzdGlja3kgdGhlIGdyYXBoaWMgKG9sZCBzY2hvb2wpXG4gICAgZ3JhcGhpYy5jbGFzc2VkKCdpcy1maXhlZCcsIHRydWUpO1xuICAgIGdyYXBoaWMuY2xhc3NlZCgnaXMtYm90dG9tJywgZmFsc2UpO1xuICB9XG4gIGZ1bmN0aW9uIGhhbmRsZUNvbnRhaW5lckV4aXQocmVzcG9uc2UpIHtcbiAgICAvLyByZXNwb25zZSA9IHsgZGlyZWN0aW9uIH1cbiAgICAvLyB1bi1zdGlja3kgdGhlIGdyYXBoaWMsIGFuZCBwaW4gdG8gdG9wL2JvdHRvbSBvZiBjb250YWluZXJcbiAgICBncmFwaGljLmNsYXNzZWQoJ2lzLWZpeGVkJywgZmFsc2UpO1xuICAgIGdyYXBoaWMuY2xhc3NlZCgnaXMtYm90dG9tJywgcmVzcG9uc2UuZGlyZWN0aW9uID09PSAnZG93bicpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAvLyAxLiBmb3JjZSBhIHJlc2l6ZSBvbiBsb2FkIHRvIGVuc3VyZSBwcm9wZXIgZGltZW5zaW9ucyBhcmUgc2VudCB0byBzY3JvbGxhbWFcbiAgICBoYW5kbGVSZXNpemUoKTtcbiAgICAvLyAyLiBzZXR1cCB0aGUgc2Nyb2xsZXIgcGFzc2luZyBvcHRpb25zXG4gICAgLy8gdGhpcyB3aWxsIGFsc28gaW5pdGlhbGl6ZSB0cmlnZ2VyIG9ic2VydmF0aW9uc1xuICAgIC8vIDMuIGJpbmQgc2Nyb2xsYW1hIGV2ZW50IGhhbmRsZXJzICh0aGlzIGNhbiBiZSBjaGFpbmVkIGxpa2UgYmVsb3cpXG4gICAgc2Nyb2xsZXIuc2V0dXAoe1xuICAgICAgICBjb250YWluZXI6ICcjc2Nyb2xsJyxcbiAgICAgICAgZ3JhcGhpYzogJy5zY3JvbGxfX2dyYXBoaWMnLFxuICAgICAgICB0ZXh0OiAnLnNjcm9sbF9fdGV4dCcsXG4gICAgICAgIHN0ZXA6ICcuc2Nyb2xsX190ZXh0IC5zdGVwJyxcbiAgICAgICAgZGVidWc6IGZhbHNlLCAgLy8gdW5jb21tZW50IHRvIGhhdmUgaW50ZXJhY3RpdmUgZGVidWdcbiAgICAgICAgb2Zmc2V0OiAuNSxcbiAgICAgIH0pXG4gICAgICAub25TdGVwRW50ZXIoaGFuZGxlU3RlcEVudGVyKVxuICAgICAgLm9uQ29udGFpbmVyRW50ZXIoaGFuZGxlQ29udGFpbmVyRW50ZXIpXG4gICAgICAub25Db250YWluZXJFeGl0KGhhbmRsZUNvbnRhaW5lckV4aXQpO1xuICAgIC8vIHNldHVwIHJlc2l6ZSBldmVudFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBoYW5kbGVSZXNpemUpO1xuICB9XG4gIC8vIGtpY2sgdGhpbmdzIG9mZlxuICBpbml0KCk7XG59XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG5cbiAgdmFyIGNvbnRhaW5lciA9IGQzLnNlbGVjdChcIi5qb3lwbG90XCIpO1xuXG4gIHZhciB3aW5kb3dIZWlnaHQgPSBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMCk7XG5cbiAgd2luZG93SGVpZ2h0ID0gTWF0aC5taW4oNDAwLHdpbmRvd0hlaWdodCk7XG5cbiAgdmFyIHdpbmRvd1dpZHRoID0gTWF0aC5taW4oY29udGFpbmVyLm5vZGUoKS5vZmZzZXRXaWR0aCw1MDApO1xuICBpZih2aWV3cG9ydFdpZHRoIDwgOTUwKXtcbiAgICB3aW5kb3dXaWR0aCA9IE1hdGgubWluKGNvbnRhaW5lci5ub2RlKCkub2Zmc2V0V2lkdGgsTWF0aC5yb3VuZCh2aWV3cG9ydFdpZHRoKi45KSk7XG4gICAgLy8gY29uc29sZS5sb2coY29udGFpbmVyLm5vZGUoKS5vZmZzZXRXaWR0aCwpO1xuICAgIC8vIGNvbnNvbGUubG9nKHdpbmRvd1dpZHRoKTtcbiAgfVxuXG4gIHZhciBtYXJnaW4gPSB7IHRvcDogNDAsIHJpZ2h0OiAxMCwgYm90dG9tOiA1MCwgbGVmdDogMTUwIH07XG4gIGlmKHZpZXdwb3J0V2lkdGggPCA0MDApe1xuICAgIG1hcmdpbi5sZWZ0ID0gMTAwO1xuICB9XG4gIHZhciB3aWR0aCA9IHdpbmRvd1dpZHRoIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQ7XG4gIHZhciBoZWlnaHQgPSB3aW5kb3dIZWlnaHQgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcblxuICB2YXIgc3ZnID0gZDMuc2VsZWN0QWxsKCcuam95cGxvdCcpLmFwcGVuZCgnc3ZnJylcbiAgICAuYXR0cignd2lkdGgnLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWFyZ2luLmxlZnQgKyAnLCcgKyBtYXJnaW4udG9wICsgJyknKTtcblxuICAvLyBORUVEIFRPIEZJR1VSRSBUSElTIE9VVFxuICB2YXIgZm9ybWF0VGltZSA9IGQzLnRpbWVGb3JtYXQoJyVZJyk7XG5cbiAgLy8gRnVuY3Rpb24gdG8gcmV0dXJuIGQudGltZVxuICB2YXIgeCA9IGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudGltZTsgfTtcbiAgeFNjYWxlID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSk7XG4gIHZhciB4VmFsdWUgPSBmdW5jdGlvbihkKSB7IHJldHVybiB4U2NhbGUoeChkKSk7IH07XG4gIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeFNjYWxlKVxuICAgICAgICAgICAgICAudGlja0Zvcm1hdChmb3JtYXRUaW1lKS50aWNrcygxMCk7XG5cbiAgdmFyIHkgPSBmdW5jdGlvbihkKSB7IHJldHVybiBkLnZhbHVlOyB9O1xuICB2YXIgeVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKTtcbiAgdmFyIHlWYWx1ZSA9IGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHlTY2FsZSh5KGQpKSArIDA7IH07XG5cbiAgdmFyIGdlbnJlID0gZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5rZXk7IH07XG4gIHZhciBnZW5yZVNjYWxlID0gZDMuc2NhbGVCYW5kKCkucmFuZ2UoWzAsIGhlaWdodF0pO1xuICB2YXIgZ2VucmVWYWx1ZSA9IGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGdlbnJlU2NhbGUoZ2VucmUoZCkpOyB9O1xuXG4gIHZhciBnZW5yZUF4aXMgPSBkMy5heGlzTGVmdChnZW5yZVNjYWxlKTtcblxuICB2YXIgYXJlYSA9IGQzLmFyZWEoKVxuICAgICAgLngoeFZhbHVlKVxuICAgICAgLnkxKHlWYWx1ZSk7XG5cbiAgdmFyIGxpbmUgPSBhcmVhLmxpbmVZMSgpO1xuXG4gIHZhciBwYXJzZVRpbWUgPSBkMy50aW1lUGFyc2UoJyVZJyk7XG5cbiAgZnVuY3Rpb24gcm93KGQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgICAgYWN0aXZpdHk6IGQuYWN0aXZpdHksXG4gICAgICAgICAgdGltZTogcGFyc2VUaW1lKCtkLnRpbWUpLFxuICAgICAgICAgIHZhbHVlOiArZC5wX3Ntb290aFxuICAgICAgfTtcbiAgfVxuXG4gIGQzLnRzdignYXNzZXRzL2NpdGllcy50c3YnLCByb3csIGZ1bmN0aW9uKGVycm9yLCBkYXRhRmxhdCkge1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAvLyBTb3J0IHgtYXhpcyBieSB0aW1lXG4gICAgZGF0YUZsYXQuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhLnRpbWUgLSBiLnRpbWU7IH0pO1xuXG4gICAgdmFyIHllYXJGb3JtYXQgPSBkMy50aW1lRm9ybWF0KFwiJVlcIik7XG5cblxuICAgIGRhdGFGbGF0ID0gZGF0YUZsYXQuZmlsdGVyKGZ1bmN0aW9uKGQpe1xuICAgICAgcmV0dXJuICt5ZWFyRm9ybWF0KGQudGltZSkgPiAxOTg4ICYmICt5ZWFyRm9ybWF0KGQudGltZSkgPCAyMDE4O1xuICAgIH0pXG5cbiAgICB2YXIgZGF0YSA9IGQzLm5lc3QoKVxuICAgICAgICAua2V5KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuYWN0aXZpdHk7IH0pXG4gICAgICAgIC5lbnRyaWVzKGRhdGFGbGF0KTtcblxuICAgIC8vIFBsYWNlIGFjdGl2aXRpZXMgYmFzZWQgaW4gb3JkZXIgb2YgbWF4IHBlYWsgdGltZVxuICAgIGZ1bmN0aW9uIHBlYWtUaW1lKGQpIHtcbiAgICAgICAgdmFyIGkgPSBkMy5zY2FuKGQudmFsdWVzLCBmdW5jdGlvbihhLCBiKSB7IHJldHVybiB5KGEpIC0geShiKTsgfSk7XG4gICAgICAgIHJldHVybiBkLnZhbHVlc1tpXS50aW1lO1xuICAgIH07XG5cbiAgICAvLyBTb3J0IGFjdGl2aXRpZXMgYnkgdXNlXG4gICAgdmFyIGdlbnJlRG9tYWluID0gW1wiSW5kaWUvQWx0ZXJuYXRpdmVcIiwgXCJIaXAgSG9wXCIsIFwiUHVua1wiLCBcIkNsYXNzaWMgUm9ja1wiLCBcIkphenovU291bFwiLCBcIk90aGVyXCIsIFwiRWxlY3Ryb25pY1wiLCBcIk1ldGFsXCIsIFwiUm9ja1wiXTtcblxuICAgIGRhdGEuc29ydChmdW5jdGlvbiAoYSwgYikge3JldHVybiBnZW5yZURvbWFpbi5pbmRleE9mKGEua2V5KSAtIGdlbnJlRG9tYWluLmluZGV4T2YoYi5rZXkpfSlcblxuICAgIHhTY2FsZS5kb21haW4oZDMuZXh0ZW50KGRhdGFGbGF0LCB4KSk7XG5cbiAgICBnZW5yZVNjYWxlLmRvbWFpbihnZW5yZURvbWFpbik7XG5cbiAgICB2YXIgb3ZlcmxhcCA9IDI7XG4gICAgdmFyIGFyZWFDaGFydEhlaWdodCA9ICgxICsgb3ZlcmxhcCkgKiAoaGVpZ2h0IC8gZ2VucmVTY2FsZS5kb21haW4oKS5sZW5ndGgpO1xuXG4gICAgeVNjYWxlXG4gICAgICAgIC5kb21haW4oZDMuZXh0ZW50KGRhdGFGbGF0LCB5KSlcbiAgICAgICAgLnJhbmdlKFthcmVhQ2hhcnRIZWlnaHQsIDBdKTtcblxuICAgIGFyZWEueTAoeVNjYWxlKDApKTtcblxuICAgIC8vIC8vIHNldCB5LWF4aXMgbGFiZWxzXG4gICAgdmFyIGdHZW5yZSA9IHN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ2FjdGl2aXRpZXMnKVxuICAgICAgLnNlbGVjdEFsbCgnLmFjdGl2aXR5JykuZGF0YShkYXRhKVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCkgeyByZXR1cm4gJ2FjdGl2aXR5IGFjdGl2aXR5LS0nICsgZC5rZXk7IH0pXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIC8vIHZhciB0eSA9IGdlbnJlVmFsdWUoZCkgLSBnZW5yZVNjYWxlLmJhbmR3aWR0aCgpO1xuICAgICAgICAgIHZhciB0eSA9IGdlbnJlVmFsdWUoZCkgLSBNYXRoLnJvdW5kKGFyZWFDaGFydEhlaWdodCk7XG4gICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnICsgdHkgKyAnKSc7XG4gICAgICB9KTtcblxuICAgIHZhciB0ZXh0Q29sb3IgPSAwO1xuICAgIHZhciBhcmVhQ29sb3IgPSAwO1xuXG4gICAgZ0dlbnJlXG4gICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciB0eSA9IE1hdGgucm91bmQoYXJlYUNoYXJ0SGVpZ2h0KSArIGdlbnJlU2NhbGUuZG9tYWluKCkubGVuZ3RoICogMS41IC0gMTA7XG4gICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoLTI1LCcgKyB0eSArICcpJztcbiAgICAgICAgfSlcbiAgICAgICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAgIC5odG1sKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQua2V5OyB9KVxuICAgICAgICAuYXR0cignZmlsbCcsIGZ1bmN0aW9uKGQpe1xuICAgICAgICAgIHZhciBjb2xvciA9IGQzLmNvbG9yKGQzLmludGVycG9sYXRlQ29vbCh0ZXh0Q29sb3IpKS5icmlnaHRlcigwKVxuICAgICAgICAgIHRleHRDb2xvciA9IHRleHRDb2xvciArIDEvOVxuICAgICAgICAgIHJldHVybiBjb2xvcjtcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLFwiZW5kXCIpO1xuXG4gICAgZ0dlbnJlXG4gICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciBlbmRWYWx1ZSA9IGQudmFsdWVzW2QudmFsdWVzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgICAgdmFyIHR5ID0gTWF0aC5yb3VuZChhcmVhQ2hhcnRIZWlnaHQpICsgZ2VucmVTY2FsZS5kb21haW4oKS5sZW5ndGggKiAxLjUgLSAxMDtcbiAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnKyh3aWR0aCs0KSsnLCcgKyAoeVNjYWxlKHkoZW5kVmFsdWUpKSkgICsgJyknO1xuICAgICAgICB9KVxuICAgICAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgLmh0bWwoZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciB2YWx1ZXMgPSBkLnZhbHVlc1xuICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGQudmFsdWVzW2QudmFsdWVzLmxlbmd0aCAtIDFdLnZhbHVlKjEwMCkrXCIlXCI7XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCdmaWxsJywgZnVuY3Rpb24oZCl7XG4gICAgICAgICAgcmV0dXJuIFwid2hpdGVcIjtcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLFwicGVyY2VudC1hbm5vdGF0aW9uXCIpXG4gICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIixcInN0YXJ0XCIpXG4gICAgICAgIDtcblxuICAgIGdHZW5yZS5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnYXJlYScpXG4gICAgICAgIC5kYXR1bShmdW5jdGlvbihkKSB7IHJldHVybiBkLnZhbHVlczsgfSlcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR0ID0gZC5maWx0ZXIoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0VGltZShkLnRpbWUpIDwgMTk5NTt9KTtcbiAgICAgICAgICAgIHJldHVybiB0dFxuICAgICAgICB9KVxuICAgICAgICAuYXR0cignZCcsIGFyZWEpXG4gICAgICAgIC5zdHlsZShcImZpbGxcIixmdW5jdGlvbihkKXtcbiAgICAgICAgICB2YXIgY29sb3IgPSBkMy5jb2xvcihkMy5pbnRlcnBvbGF0ZUNvb2woYXJlYUNvbG9yKSkuZGFya2VyKDIpXG4gICAgICAgICAgYXJlYUNvbG9yID0gYXJlYUNvbG9yICsgMS85O1xuICAgICAgICAgIHJldHVybiBjb2xvcjtcblxuICAgICAgICAgIHJldHVybiBcInJlZFwiO1xuICAgICAgICB9KVxuICAgICAgICA7XG5cbiAgICBnR2VucmUuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmUnKVxuICAgICAgICAuZGF0dW0oZnVuY3Rpb24oZCkgeyByZXR1cm4gZC52YWx1ZXM7IH0pXG4gICAgICAgIC5hdHRyKCdkJywgbGluZSlcbiAgICAgICAgLmF0dHIoJ3N0cm9rZScsICd3aGl0ZScpXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpO1xuXG4gICAgZ0dlbnJlLmFwcGVuZCgnbGluZScpXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lLWJvdHRvbScpXG4gICAgICAgIC5kYXR1bShmdW5jdGlvbihkKSB7IHJldHVybiBkLnZhbHVlczsgfSlcbiAgICAgICAgLmF0dHIoXCJ4MVwiLC0xMClcbiAgICAgICAgLmF0dHIoXCJ4MlwiLHdpZHRoKzEwKVxuICAgICAgICAuYXR0cihcInkxXCIsMClcbiAgICAgICAgLmF0dHIoXCJ5MlwiLDApXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIHR5ID0gTWF0aC5yb3VuZChhcmVhQ2hhcnRIZWlnaHQpICsgZ2VucmVTY2FsZS5kb21haW4oKS5sZW5ndGggKiAxLjUgLSAxMDtcbiAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgtMTAsJyArIHR5ICsgJyknO1xuICAgICAgICB9KVxuICAgICAgICAuYXR0cignc3Ryb2tlJywgJ3doaXRlJylcbiAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XG5cbiAgICB0cmFja2VyID0gc3ZnLmFwcGVuZChcImdcIilcbiAgICAgIC5hdHRyKFwiY2xhc3NcIixcIm1hcmtUcmFja2VyXCIpXG4gICAgICA7XG5cbiAgICB0cmFja2VyT25lID0gdHJhY2tlci5hcHBlbmQoJ2xpbmUnKVxuICAgICAgLmF0dHIoXCJ4MVwiLGZ1bmN0aW9uKGQpe1xuICAgICAgICByZXR1cm4geFNjYWxlKG5ldyBEYXRlKDE5ODksIDAsIDEpKVxuICAgICAgfSlcbiAgICAgIC5hdHRyKFwieDJcIixmdW5jdGlvbihkKXtcbiAgICAgICAgcmV0dXJuIHhTY2FsZShuZXcgRGF0ZSgxOTg5LCAwLCAxKSlcbiAgICAgIH0pXG4gICAgICAuYXR0cihcInkxXCIsLTEwMClcbiAgICAgIC5hdHRyKFwieTJcIixoZWlnaHQrMjApXG4gICAgICAuYXR0cignY2xhc3MnLFwibWFza0xpbmVcIilcblxuICAgIHRyYWNrZXJSZWN0ID0gdHJhY2tlci5hcHBlbmQoJ3JlY3QnKVxuICAgICAgLmF0dHIoXCJ4XCIsZnVuY3Rpb24oZCl7XG4gICAgICAgIHJldHVybiB4U2NhbGUobmV3IERhdGUoMTk4OSwgMCwgMSkpXG4gICAgICB9KVxuICAgICAgLmF0dHIoXCJ5XCIsLTEwMClcbiAgICAgIC5hdHRyKFwid2lkdGhcIixmdW5jdGlvbihkKXtcbiAgICAgICAgcmV0dXJuIHhTY2FsZShuZXcgRGF0ZSgxOTkwLCAwLCAxKSkgLSB4U2NhbGUobmV3IERhdGUoMTk4OSwgMCwgMSkpXG4gICAgICB9KVxuICAgICAgLmF0dHIoXCJoZWlnaHRcIixmdW5jdGlvbihkKXtcbiAgICAgICAgcmV0dXJuIGhlaWdodCsyMCsxMDA7XG4gICAgICB9KVxuICAgICAgLmF0dHIoJ2NsYXNzJyxcIm1hc2tSZWN0XCIpXG5cbiAgICB0cmFja2VyVHdvID0gdHJhY2tlci5hcHBlbmQoJ2xpbmUnKVxuICAgICAgLmF0dHIoXCJ4MVwiLGZ1bmN0aW9uKGQpe1xuICAgICAgICByZXR1cm4geFNjYWxlKG5ldyBEYXRlKDE5OTAsIDAsIDEpKVxuICAgICAgfSlcbiAgICAgIC5hdHRyKFwieDJcIixmdW5jdGlvbihkKXtcbiAgICAgICAgcmV0dXJuIHhTY2FsZShuZXcgRGF0ZSgxOTkwLCAwLCAxKSlcbiAgICAgIH0pXG4gICAgICAuYXR0cihcInkxXCIsLTEwMClcbiAgICAgIC5hdHRyKFwieTJcIixoZWlnaHQrMjApXG4gICAgICAuYXR0cignY2xhc3MnLFwibWFza0xpbmVcIilcblxuICAgIC8vICAgICAuYXR0cignd2lkdGgnLCBkMy5zZWxlY3QoJ2Rpdi5qb3lwbG90Jykubm9kZSgpLm9mZnNldFdpZHRoKVxuICAgIC8vICAgICAuYXR0cignaGVpZ2h0JywgZDMuc2VsZWN0KCdkaXYuY2hhcnQnKS5ub2RlKCkub2Zmc2V0SGVpZ2h0KSAvLyB3YXMgZGl2aWRlZCBieSAyLjcgPT4gYmFkXG4gICAgLy8gICAgIC5hdHRyKCdpZCcsICdtYXNrUmVjdCcpXG4gICAgLy8gICAgIC5hdHRyKCdvcGFjaXR5JywgMSk7XG5cbiAgICBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2F4aXMgYXhpcy0teCcpXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsJyArIChoZWlnaHQtMjApICsgJyknKVxuICAgICAgICAuY2FsbCh4QXhpcylcbiAgICAgICAgLnNlbGVjdEFsbChcInRleHRcIilcbiAgICAgICAgLmF0dHIoXCJ5XCIsMTMpXG4gICAgICAgIDtcblxuICAgIC8vIFJlbW92ZSB5ZWFycyBpbiB4LWF4aXMgZm9yIHdoaWNoIG5vIGRhdGEgYWN0dWFsbHkgZXhpc3RzXG4gICAgZDMuc2VsZWN0QWxsKFwiLnRpY2sgdGV4dFwiKVxuICAgICAgICAuZWFjaCggZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgaWYodmlld3BvcnRXaWR0aCA8IDQwMCl7XG4gICAgICAgICAgICAgIGlmIChpICUgMyA9PSAwIHx8IGkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpICUgMiAhPSAwKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIGQzLnNlbGVjdEFsbCgnLnRpY2snKVxuICAgICAgICAuZWFjaCggZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgIGlmKHZpZXdwb3J0V2lkdGggPCA0MDApe1xuICAgICAgICAgICAgaWYgKGkgJSAzID09IDAgfHwgaSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKGkgJSAyICE9IDApIHtcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgICAgICAgICAuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgLy8gc3ZnXG4gICAgLy8gICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgIC8vICAgICAuYXR0cignY2xhc3MnLCAnam95dGl0bGUnKVxuICAgIC8vICAgICAuYXR0cigneCcsIHdpZHRoIC8gMilcbiAgICAvLyAgICAgLmF0dHIoJ3knLCAxMClcbiAgICAvLyAgICAgLmF0dHIoJ2ZpbGwnLCAnd2hpdGUnKVxuICAgIC8vICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICc0MHB4JylcbiAgICAvLyAgICAgLnRleHQoJ3RpdGxlJyk7XG5cbiAgfSk7XG5cbiAgdGVzdFN0b3J5Q29kZSgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7IGluaXQsIHJlc2l6ZSB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy9qb3lwbG90LmpzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBUUE7QUFNQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBUUE7QUFDQTtBQVFBO0FBTUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQVFBO0FBQ0E7QUFRQTtBQU1BO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFRQTtBQUNBO0FBUUE7QUFNQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBSUE7QUFFQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar svgContainer;\nvar genreLabels;\nvar use;\nvar viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\nvar viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nfunction resize() {}\n\nfunction init() {\n  /* bubbleChart creation function.\n   *\n   */\n\n  function floatingTooltip(tooltipId, width) {\n    // Local variable to hold tooltip div for\n    // manipulation in other functions.\n    var tt = d3v3.select('body').append('div').attr('class', 'tooltip').attr('id', tooltipId).style('pointer-events', 'none');\n\n    // Set a width if it is provided.\n    if (width) {\n      tt.style('width', width);\n    }\n\n    // Initially it is hidden.\n    hideTooltip();\n\n    /*\n     * Display tooltip with provided content.\n     *\n     * content is expected to be HTML string.\n     *\n     * event is d3v3.event for positioning.\n     */\n    function showTooltip(content, event) {\n      tt.style('opacity', 1.0).html(content);\n\n      updatePosition(event);\n    }\n\n    /*\n     * Hide the tooltip div.\n     */\n    function hideTooltip() {\n      tt.style('opacity', 0.0);\n    }\n\n    /*\n     * Figure out where to place the tooltip\n     * based on d3v3 mouse event.\n     */\n    function updatePosition(event) {\n      var xOffset = 20;\n      var yOffset = 10;\n\n      var ttw = tt.style('width');\n      var tth = tt.style('height');\n\n      var wscrY = window.scrollY;\n      var wscrX = window.scrollX;\n\n      var curX = document.all ? event.clientX + wscrX : event.pageX;\n      var curY = document.all ? event.clientY + wscrY : event.pageY;\n      var ttleft = curX - wscrX + xOffset * 2 + ttw > window.innerWidth ? curX - ttw - xOffset * 2 : curX + xOffset;\n\n      if (ttleft < wscrX + xOffset) {\n        ttleft = wscrX + xOffset;\n      }\n\n      var tttop = curY - wscrY + yOffset * 2 + tth > window.innerHeight ? curY - tth - yOffset * 2 : curY + yOffset;\n\n      if (tttop < wscrY + yOffset) {\n        tttop = curY + yOffset;\n      }\n\n      tt.style({ top: tttop + 'px', left: ttleft + 'px' });\n    }\n\n    return {\n      showTooltip: showTooltip,\n      hideTooltip: hideTooltip,\n      updatePosition: updatePosition\n    };\n  }\n\n  /* bubbleChart creation function.\n   *\n   */\n  function bubbleChart() {\n    // Constants for sizing\n\n    var margin = { top: 50, bottom: 20, left: 0, right: 0 };\n    // var width = 1500 - margin.right;\n    // var height = 1000 - margin.top - margin.bottom;\n    // var boundingRect = d3.select('#vis').node().getBoundingClientRect();\n    var width = Math.min(viewportWidth, 950);\n    var height = 1050;\n    if (viewportWidth < 500) {\n      height = 2500;\n    }\n    // var width = 1100;\n    // var height = 1050;\n\n    // tooltip for mouseover functionality\n    var tooltip = floatingTooltip('bubble_tooltip', 240);\n\n    // Locations to move bubbles towards, depending\n    // on which view mode is selected.\n    var center = { x: width / 2, y: height / 2 };\n\n    var selbubbles = [];\n\n    var popScaleRange = [width / 3.5, width / 2, width / 1.4];\n    if (viewportWidth < 500) {\n      popScaleRange = [width / 2, width / 2, width / 2];\n    }\n\n    var popScale = d3.scaleOrdinal().domain(['low', 'medium', 'high']).range(popScaleRange);\n\n    var genreXRange = [width / 3, width / 1.25];\n    if (viewportWidth < 500) {\n      genreXRange = [width / 2, width / 2];\n    }\n\n    var genereXScale = d3.scaleBand().domain(['4', '2', '3', '1'])\n    // .range([width, width, (width / 2.75), (width / 2.7), (width / 1.9), (width / 1.9), (width / 1.55), (width / 1.55), (width / 1.55)]);\n    .range(genreXRange);\n\n    var useCenters = {\n      'low': { x: popScale('low'), y: 1050 / 3.5 }, //width / 4\n      'medium': { x: popScale('medium'), y: 1050 / 3.5 }, //width / 2.75\n      'high': { x: popScale('high'), y: 1050 / 3.5 //width / 1.5\n      } };\n\n    if (viewportWidth < 500) {\n      useCenters = {\n        'low': { x: popScale('low'), y: 1050 / 3.5 + 1050 / 2 }, //width / 4\n        'medium': { x: popScale('medium'), y: 1050 / 2 }, //width / 2.75\n        'high': { x: popScale('high'), y: 1050 / 3.5 //width / 1.5\n        } };\n    }\n\n    // X locations of the year titles.\n    var useTitleX = {\n      'Low': popScale('low'), //width / 6,\n      'Medium': popScale('medium'), //width / 2.3,\n      'High': popScale('high') //width / 1.35\n    };\n\n    var genreCenters = {\n      'Classic Rock': { x: genereXScale('1'), y: height / 3.5 },\n      'Indie/Alternative': { x: genereXScale('1'), y: height / 2 },\n      'Hip Hop': { x: genereXScale('2'), y: height / 3.5 },\n      'Electronic': { x: genereXScale('2'), y: height / 2 },\n      'Punk': { x: genereXScale('3'), y: height / 3.5 },\n      'Metal': { x: genereXScale('3'), y: height / 2 },\n      'Other': { x: genereXScale('4'), y: height / 3.5 },\n      'Jazz/Soul': { x: genereXScale('4'), y: height / 2 },\n      'Rock': { x: genereXScale('4'), y: height / 2 }\n    };\n\n    if (viewportWidth < 500) {\n      genreCenters = {\n        'Classic Rock': { x: genereXScale('1'), y: 1050 / 3.5 },\n        'Indie/Alternative': { x: genereXScale('1'), y: 1050 / 2 },\n        'Hip Hop': { x: genereXScale('2'), y: 1050 / 3.5 + 1050 / 2 },\n        'Electronic': { x: genereXScale('2'), y: 1050 / 2 + 1050 / 2 },\n        'Punk': { x: genereXScale('3'), y: 1050 / 3.5 + 1050 },\n        'Metal': { x: genereXScale('3'), y: 1050 / 2 + 1050 },\n        'Other': { x: genereXScale('4'), y: 1050 / 3.5 + 1050 + 1050 / 2 },\n        'Jazz/Soul': { x: genereXScale('4'), y: 1050 / 2 + 1050 + 1050 / 2 },\n        'Rock': { x: genereXScale('4'), y: 1050 / 3.5 + 1050 + 1050 / 2 }\n      };\n    }\n\n    // X locations of the year titles.\n    var genreTitleX = {\n      'Classic Rock': genereXScale('1'),\n      'Indie/Alternative': genereXScale('1'),\n      'Hip Hop': genereXScale('2'),\n      'Electronic': genereXScale('2'),\n      'Punk': genereXScale('3'),\n      'Metal': genereXScale('3'),\n      'Other': genereXScale('4'),\n      'Jazz/Soul': genereXScale('4')\n\n    };\n\n    // Y locations of the year titles.\n    var genreTitleY = {\n      'Classic Rock': 0,\n      'Indie/Alternative': height / 2.4,\n      'Hip Hop': 0,\n      'Electronic': height / 2.4,\n      'Punk': 0,\n      'Metal': height / 2.4,\n      'Other': 0,\n      'Jazz/Soul': height / 2.4\n\n    };\n\n    // Used when setting up force and\n    // moving around nodes\n    var damper = 0.102;\n\n    // These will be set in create_nodes and create_vis\n    var svg = null;\n    var bubbles = null;\n    var nodes = [];\n\n    var text = [];\n\n    function charge(d) {\n      return -Math.pow(d.radius, 2.0) / 7.7;\n    }\n\n    var force = d3v3.layout.force().size([width, height]).charge(charge).gravity(-0.011).friction(0.9);\n\n    var fillColor2 = d3v3.scale.ordinal().domain(['Classic Rock', 'Punk', 'Indie/Alternative', 'Metal', 'Hip Hop', 'Electronic', 'Jazz/Soul']).range(['#fbb4ae', '#fddaec', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#b3cde3', '#f2f2f2']);\n\n    // Nice looking colors - no reason to buck the trend\n    var fillColor = d3v3.scale.ordinal().domain(['low', 'medium', 'high']).range(['red', 'red', '#b2e2e2']);\n\n    var radiusRange = [8, 70];\n    if (viewportWidth < 950) {\n      radiusRange = [6, 50];\n    }\n    if (viewportWidth < 400) {\n      radiusRange = [5, 40];\n    }\n\n    var radiusScale = d3v3.scale.pow().exponent(2.1).range(radiusRange);\n\n    function createNodes(rawData) {\n      // Use map() to convert raw data into node data.\n      // Checkout http://learnjsdata.com/ for more on\n      // working with data.\n      var myNodes = rawData.map(function (d) {\n        return {\n          id: d.id,\n          radius: radiusScale(+d.tote),\n          value: d.tote,\n          name: d.artist,\n          org: d.organization,\n          group: d.group,\n          genre: d.genre,\n          year: d.year,\n          x: Math.random() * +genreCenters[d.genre].x, //900,\n          y: Math.random() * +genreCenters[d.genre].y\n        };\n      });\n\n      // sort them to prevent occlusion of smaller nodes.\n      myNodes.sort(function (a, b) {\n        return b.value - a.value;\n      });\n\n      return myNodes;\n    }\n\n    var chart = function chart(selector, rawData) {\n\n      var maxAmount = d3v3.max(rawData, function (d) {\n        return +d.tote;\n      });\n      radiusScale.domain([0, maxAmount]);\n\n      rawData.sort(function (a, b) {\n        return b.value - a.value;\n      });\n\n      nodes = createNodes(rawData);\n      // Set the force's nodes to our newly created nodes array.\n      force.nodes(nodes);\n\n      // Create a SVG element inside the provided selector\n      // with desired size.\n      svgContainer = d3v3.select(selector).append('svg').attr('width', width).attr('height', height);\n\n      svg = svgContainer.append(\"g\").attr(\"transform\", \"translate(\" + 0 + \",\" + margin.top + \")\");\n\n      // Bind nodes data to what will become DOM elements to represent them.\n      bubbles = svg.append(\"g\").selectAll('.bubble').data(nodes, function (d) {\n        return d.id;\n      });\n\n      // Create new circle elements each with class `bubble`.\n      // There will be one circle.bubble for each object in the nodes array.\n      // Initially, their radius (r attribute) will be 0.\n      bubbles.enter().append('g').sort(function (a, b) {\n        return a.radius - b.radius;\n      }); // new below\n\n      bubbles.append(\"circle\").classed('bubble', true).attr('class', 'bubble-circle').attr('r', function (d) {\n        return d.radius - 2;\n      }).attr('fill', function (d) {\n        return fillColor2(d.genre);\n      }).attr('stroke', function (d) {\n        return d3v3.rgb(fillColor2(d.genre)).darker();\n      }).attr('stroke-width', function (d) {\n        if (d.radius > 17) {\n          return 1.5;\n        }\n        return .75;\n      }).on('mouseover', showDetail).on('mouseout', hideDetail);\n      // .call(force.drag);\n\n      bubbles.filter(function (d) {\n        return d.radius > 17;\n      }).append(\"text\").text(function (d) {\n        return d.name;\n      });\n\n      var genreData = d3v3.keys(genreTitleX);\n\n      genreLabels = svg.append(\"g\").selectAll('.genre').data(genreData).enter().append(\"g\").attr(\"transform\", function (d) {\n        return \"translate(\" + genreTitleX[d] + \",\" + genreTitleY[d] + \")\";\n      });\n\n      genreLabels.append('text').attr('class', 'title').attr('text-anchor', 'middle').text(function (d) {\n        return d;\n      }).style(\"fill\", function (d) {\n        return d3v3.rgb(fillColor2(d)).darker(1.5);\n      });\n\n      genreLabels.append('rect').attr('class', 'title-bar').attr(\"width\", 50).attr(\"height\", 2).attr(\"x\", -25).attr(\"y\", 10).style(\"fill\", function (d) {\n        return d3v3.rgb(fillColor2(d)).darker();\n      });\n\n      var useData = d3v3.keys(useTitleX);\n\n      use = svg.selectAll('.group').data(useData).enter().append('text').attr('class', 'year').attr(\"transform\", function (d) {\n        return \"translate(\" + useTitleX[d] + \",\" + 100 + \")\";\n      }).attr('text-anchor', 'middle').text(function (d) {\n        return d;\n      });\n\n      svg.selectAll('.bubble-label').attr('visibility', 'visible');\n      // hide popularity axis\n      d3.select('.bubble-axis').attr(\"x2\", width / 7).attr(\"y2\", height / 11).attr('visibility', 'hidden');\n\n      d3.selectAll('.bubble-axis-text').style('opacity', 0);\n\n      groupBubbles();\n    };\n\n    d3v3.select(\"#search\").on(\"keyup\", function (event) {\n\n      var searched_data = nodes,\n          text = this.value.trim();\n      if (text != \"\" & text != \"none\") {\n\n        var searchResults = searched_data.map(function (r) {\n          var regex = new RegExp(\"^\" + text + \".*\", \"i\");\n          if (regex.test(r.name)) {\n            // if there are any results\n            return regex.exec(r.name)[0]; // return them to searchResults\n          };\n        });\n\n        // filter blank entries from searchResults\n        searchResults = searchResults.filter(function (r) {\n          return r != undefined;\n        });\n        // filter dataset with searchResults\n        searched_data = searchResults.map(function (r) {\n          return nodes.filter(function (p) {\n            return p.name.indexOf(r) != -1;\n          });\n        });\n\n        // flatten array\n        searched_data = [].concat.apply([], searched_data); // This finds the data we want\n        // data bind with new data\n        selbubbles = bubbles.selectAll('.bubble-circle').data(searched_data, function (d) {\n          return d.name;\n        });\n        // Style select nodes\n        selbubbles.style('opacity', .75).style('stroke-width', 3.5).style('stroke', 'black');\n      } else {\n        d3v3.selectAll('.bubble-circle').style(\"opacity\", null).style('stroke-width', null).style('stroke', null);\n      }\n\n      selbubbles.exit().style(\"opacity\", null).style('stroke-width', null).style('stroke', null);\n    });\n\n    function groupBubbles() {\n      hideYears();\n      hideUse();\n      showGenre();\n\n      var minYUse = {\n        'high': 100000000,\n        'medium': 100000000,\n        'low': 100000000\n      };\n\n      var minXUse = {\n        'high': 100000000,\n        'medium': 100000000,\n        'low': 100000000\n      };\n\n      var maxXUse = {\n        'high': -100000000,\n        'medium': -100000000,\n        'low': -100000000\n      };\n\n      var minY = {\n        'Classic Rock': 100000000,\n        'Indie/Alternative': 100000000,\n        'Hip Hop': 100000000,\n        'Electronic': 100000000,\n        'Punk': 100000000,\n        'Metal': 100000000,\n        'Other': 100000000,\n        'Jazz/Soul': 100000000\n      };\n\n      var minX = {\n        'Classic Rock': 100000000,\n        'Indie/Alternative': 100000000,\n        'Hip Hop': 100000000,\n        'Electronic': 100000000,\n        'Punk': 100000000,\n        'Metal': 100000000,\n        'Other': 100000000,\n        'Jazz/Soul': 100000000\n      };\n\n      var maxX = {\n        'Classic Rock': -100000000,\n        'Indie/Alternative': -100000000,\n        'Hip Hop': -100000000,\n        'Electronic': -100000000,\n        'Punk': -100000000,\n        'Metal': -100000000,\n        'Other': -100000000,\n        'Jazz/Soul': -100000000\n      };\n\n      force.on('tick', function (e) {\n\n        if (e.alpha >= .03) {\n\n          bubbles.each(moveToGenre(1.05 * e.alpha));\n\n          bubbles.attr('transform', function (d) {\n            return \"translate(\" + d.x + \",\" + d.y + \")\";\n          });\n        } else {\n\n          force.stop();\n\n          bubbles.each(function (d, i) {\n            if (d.y < minYUse[d[\"group\"]]) {\n              minYUse[d[\"group\"]] = d.y;\n            }\n            if (d.y < minY[d[\"genre\"]]) {\n              minY[d[\"genre\"]] = d.y;\n            }\n            if (d.x < minXUse[d[\"group\"]]) {\n              minXUse[d[\"group\"]] = d.x;\n            }\n            if (d.x < minX[d[\"genre\"]]) {\n              minX[d[\"genre\"]] = d.x;\n            }\n            if (d.x > maxX[d[\"genre\"]]) {\n              maxX[d[\"genre\"]] = d.x;\n            }\n            if (d.x > maxXUse[d[\"group\"]]) {\n              maxXUse[d[\"group\"]] = d.x;\n            }\n          });\n\n          genreLabels.transition().duration(500).attr(\"transform\", function (d) {\n            console.log(\"here\");\n            return \"translate(\" + ((maxX[d] - minX[d]) / 2 + minX[d]) + \",\" + (minY[d] - 50) + \")\";\n          });\n\n          // use.attr(\"transform\",function(d){\n          //   var group = d.toLowerCase();\n          //   return \"translate(\"+((maxXUse[group]-minXUse[group])/2+minXUse[group])+\",\"+(minYUse[group] - 50)+\")\"\n          // });\n        }\n      });\n\n      force.start();\n    }\n\n    function moveToCenter(alpha) {\n      return function (d) {\n        d.x = d.x + (center.x - d.x) * damper * alpha;\n        d.y = d.y + (center.y - d.y) * damper * alpha;\n      };\n    }\n\n    function splitBubbles() {\n      showYears();\n\n      force.on('tick', function (e) {\n        bubbles.each(moveToYears(e.alpha)).attr('cx', function (d) {\n          return d.x;\n        }).attr('cy', function (d) {\n          return d.y;\n        });\n      });\n\n      force.start();\n    }\n\n    function splitBubblesUse() {\n      hideGenre();\n      showUse();\n\n      var minYUse = {\n        'high': 100000000,\n        'medium': 100000000,\n        'low': 100000000\n      };\n\n      var minXUse = {\n        'high': 100000000,\n        'medium': 100000000,\n        'low': 100000000\n      };\n\n      var maxXUse = {\n        'high': -100000000,\n        'medium': -100000000,\n        'low': -100000000\n      };\n\n      var minY = {\n        'Classic Rock': 100000000,\n        'Indie/Alternative': 100000000,\n        'Hip Hop': 100000000,\n        'Electronic': 100000000,\n        'Punk': 100000000,\n        'Metal': 100000000,\n        'Other': 100000000,\n        'Jazz/Soul': 100000000\n      };\n\n      var minX = {\n        'Classic Rock': 100000000,\n        'Indie/Alternative': 100000000,\n        'Hip Hop': 100000000,\n        'Electronic': 100000000,\n        'Punk': 100000000,\n        'Metal': 100000000,\n        'Other': 100000000,\n        'Jazz/Soul': 100000000\n      };\n\n      var maxX = {\n        'Classic Rock': -100000000,\n        'Indie/Alternative': -100000000,\n        'Hip Hop': -100000000,\n        'Electronic': -100000000,\n        'Punk': -100000000,\n        'Metal': -100000000,\n        'Other': -100000000,\n        'Jazz/Soul': -100000000\n      };\n\n      force.on('tick', function (e) {\n\n        // bubbles.each(moveToUse(e.alpha))\n        //   .attr('transform', function (d) {\n        //     return \"translate(\"+d.x+\",\"+d.y+\")\";\n        //   })\n\n        if (e.alpha >= .03) {\n\n          bubbles.each(moveToUse(1.05 * e.alpha));\n\n          bubbles.attr('transform', function (d) {\n            return \"translate(\" + d.x + \",\" + d.y + \")\";\n          });\n        } else {\n\n          force.stop();\n\n          bubbles.each(function (d, i) {\n            if (d.y < minYUse[d[\"group\"]]) {\n              minYUse[d[\"group\"]] = d.y;\n            }\n            if (d.y < minY[d[\"genre\"]]) {\n              minY[d[\"genre\"]] = d.y;\n            }\n            if (d.x < minXUse[d[\"group\"]]) {\n              minXUse[d[\"group\"]] = d.x;\n            }\n            if (d.x < minX[d[\"genre\"]]) {\n              minX[d[\"genre\"]] = d.x;\n            }\n            if (d.x > maxX[d[\"genre\"]]) {\n              maxX[d[\"genre\"]] = d.x;\n            }\n            if (d.x > maxXUse[d[\"group\"]]) {\n              maxXUse[d[\"group\"]] = d.x;\n            }\n          });\n\n          // genreLabels.attr(\"transform\",function(d){\n          //   return \"translate(\"+((maxX[d]-minX[d])/2+minX[d])+\",\"+(minY[d] - 50)+\")\"\n          // });\n\n          use.transition().duration(500).attr(\"transform\", function (d) {\n            var group = d.toLowerCase();\n            return \"translate(\" + ((maxXUse[group] - minXUse[group]) / 2 + minXUse[group]) + \",\" + (minYUse[group] - 50) + \")\";\n          });\n        }\n      });\n\n      force.start();\n    }\n\n    function splitBubblesGenre() {\n      hideUse();\n      showGenre();\n\n      force.on('tick', function (e) {\n        bubbles.each(moveToGenre(e.alpha)).attr('transform', function (d) {\n          return \"translate(\" + d.x + \",\" + d.y + \")\";\n        });\n      });\n\n      force.start();\n    }\n\n    function moveToYears(alpha) {\n      return function (d) {\n        var target = yearCenters[d.year];\n        d.x = d.x + (target.x - d.x) * damper * alpha * 1.1;\n        d.y = d.y + (target.y - d.y) * damper * alpha * 1.1;\n      };\n    }\n\n    function hideYears() {\n      svg.selectAll('.year').style(\"visibility\", \"hidden\");\n    }\n\n    /*\n     * Shows Year title displays.\n     */\n    function showYears() {\n      // Another way to do this would be to create\n      // the year texts once and then just hide them.\n      var yearsData = d3v3.keys(yearsTitleX);\n      var years = svg.selectAll('.year').data(yearsData);\n\n      years.enter().append('text').attr('class', 'year').attr('x', function (d) {\n        return yearsTitleX[d];\n      }).attr('y', 40).attr('text-anchor', 'middle').text(function (d) {\n        return d;\n      });\n    }\n\n    function moveToUse(alpha) {\n      return function (d) {\n        var target = useCenters[d.group];\n        d.x = d.x + (target.x - d.x) * damper * alpha * 1.1;\n        d.y = d.y + (target.y - d.y) * damper * alpha * 1.1;\n      };\n    }\n\n    function hideUse() {\n      svg.selectAll('.year').style(\"visibility\", \"hidden\");\n    }\n\n    function showUse() {\n      svg.selectAll('.year').style(\"visibility\", \"visible\");\n    }\n\n    function moveToGenre(alpha) {\n      return function (d) {\n        var target = genreCenters[d.genre];\n        d.x = d.x + (target.x - d.x) * damper * alpha * 1.1;\n        d.y = d.y + (target.y - d.y) * damper * alpha * 1.1;\n      };\n    }\n\n    function hideGenre() {\n      svg.selectAll('.title').style(\"visibility\", \"hidden\");\n      svg.selectAll('.title-bar').style(\"visibility\", \"hidden\");\n      svg.selectAll('.bubble-label').attr('visibility', 'hidden');\n    }\n\n    function showGenre() {\n      svg.selectAll('.title').style(\"visibility\", \"visible\");\n      svg.selectAll('.title-bar').style(\"visibility\", \"visible\");\n      svg.selectAll('.bubble-label').attr('visibility', 'visible');\n      // Another way to do this would be to create\n      // the year texts once and then just hide them.\n    }\n\n    function showDetail(d) {\n      var content = '<div class=\"tttext\"><span class=\"name\">Artist: </span><span class=\"value\">' + d.name + '</span><br/>' + '<span class=\"name\">Amount Used: </span><span class=\"value\">' + d.value + '</span><br/>' + '<span class=\"name\">Genre: </span><span class=\"value\">' + d.genre + '</span><br/></div>';\n      tooltip.showTooltip(content, d3v3.event);\n    }\n\n    function hideDetail(d) {\n      tooltip.hideTooltip();\n    }\n\n    chart.toggleDisplay = function (displayName) {\n      if (displayName === 'year') {\n        splitBubbles();\n      } else if (displayName == 'use') {\n        splitBubblesUse();\n        if (viewportWidth < 500) {\n          svgContainer.attr(\"height\", 1050);\n        } else {\n          svgContainer.attr(\"height\", 700);\n        }\n      } else if (displayName == 'genre') {\n        groupBubbles();\n        if (viewportWidth < 500) {\n          svgContainer.attr(\"height\", 2500);\n        } else {\n          svgContainer.attr(\"height\", 900);\n        }\n      } else {\n        groupBubbles();\n      }\n    };\n\n    return chart;\n  }\n\n  var myBubbleChart = bubbleChart();\n\n  function display(error, data) {\n    if (error) {\n      console.log(error);\n    }\n\n    myBubbleChart('#vis', data);\n  }\n\n  function setupButtons() {\n    d3v3.select('#toolbar').selectAll('.button').on('click', function () {\n      // Remove active class from all buttons\n      d3v3.selectAll('.button').classed('active', false);\n      // Find the button just clicked\n      var button = d3v3.select(this);\n\n      // Set it as the active button\n      button.classed('active', true);\n\n      // Get the id of the button\n      var buttonId = button.attr('id');\n\n      // Toggle the bubble chart based on\n      // the currently clicked button.\n      myBubbleChart.toggleDisplay(buttonId);\n    });\n  }\n\n  d3v3.csv('assets/soundtrack_data.csv', display);\n\n  // setup the buttons.\n  setupButtons();\n}\n\nexports.default = { init: init, resize: resize };//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvYnViYmxlcy5qcz8yYWZiIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBzdmdDb250YWluZXI7XG52YXIgZ2VucmVMYWJlbHM7XG52YXIgdXNlO1xudmFyIHZpZXdwb3J0V2lkdGggPSBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApO1xudmFyIHZpZXdwb3J0SGVpZ2h0ID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IDApO1xuXG5mdW5jdGlvbiByZXNpemUoKSB7fVxuXG5mdW5jdGlvbiBpbml0KCkge1xuLyogYnViYmxlQ2hhcnQgY3JlYXRpb24gZnVuY3Rpb24uXG4gKlxuICovXG5cblxuXG5mdW5jdGlvbiBmbG9hdGluZ1Rvb2x0aXAodG9vbHRpcElkLCB3aWR0aCkge1xuICAvLyBMb2NhbCB2YXJpYWJsZSB0byBob2xkIHRvb2x0aXAgZGl2IGZvclxuICAvLyBtYW5pcHVsYXRpb24gaW4gb3RoZXIgZnVuY3Rpb25zLlxuICB2YXIgdHQgPSBkM3YzLnNlbGVjdCgnYm9keScpXG4gICAgLmFwcGVuZCgnZGl2JylcbiAgICAuYXR0cignY2xhc3MnLCAndG9vbHRpcCcpXG4gICAgLmF0dHIoJ2lkJywgdG9vbHRpcElkKVxuICAgIC5zdHlsZSgncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xuXG4gIC8vIFNldCBhIHdpZHRoIGlmIGl0IGlzIHByb3ZpZGVkLlxuICBpZiAod2lkdGgpIHtcbiAgICB0dC5zdHlsZSgnd2lkdGgnLCB3aWR0aCk7XG4gIH1cblxuICAvLyBJbml0aWFsbHkgaXQgaXMgaGlkZGVuLlxuICBoaWRlVG9vbHRpcCgpO1xuXG4gIC8qXG4gICAqIERpc3BsYXkgdG9vbHRpcCB3aXRoIHByb3ZpZGVkIGNvbnRlbnQuXG4gICAqXG4gICAqIGNvbnRlbnQgaXMgZXhwZWN0ZWQgdG8gYmUgSFRNTCBzdHJpbmcuXG4gICAqXG4gICAqIGV2ZW50IGlzIGQzdjMuZXZlbnQgZm9yIHBvc2l0aW9uaW5nLlxuICAgKi9cbiAgZnVuY3Rpb24gc2hvd1Rvb2x0aXAoY29udGVudCwgZXZlbnQpIHtcbiAgICB0dC5zdHlsZSgnb3BhY2l0eScsIDEuMClcbiAgICAgIC5odG1sKGNvbnRlbnQpO1xuXG4gICAgdXBkYXRlUG9zaXRpb24oZXZlbnQpO1xuICB9XG5cbiAgLypcbiAgICogSGlkZSB0aGUgdG9vbHRpcCBkaXYuXG4gICAqL1xuICBmdW5jdGlvbiBoaWRlVG9vbHRpcCgpIHtcbiAgICB0dC5zdHlsZSgnb3BhY2l0eScsIDAuMCk7XG4gIH1cblxuICAvKlxuICAgKiBGaWd1cmUgb3V0IHdoZXJlIHRvIHBsYWNlIHRoZSB0b29sdGlwXG4gICAqIGJhc2VkIG9uIGQzdjMgbW91c2UgZXZlbnQuXG4gICAqL1xuICBmdW5jdGlvbiB1cGRhdGVQb3NpdGlvbihldmVudCkge1xuICAgIHZhciB4T2Zmc2V0ID0gMjA7XG4gICAgdmFyIHlPZmZzZXQgPSAxMDtcblxuICAgIHZhciB0dHcgPSB0dC5zdHlsZSgnd2lkdGgnKTtcbiAgICB2YXIgdHRoID0gdHQuc3R5bGUoJ2hlaWdodCcpO1xuXG4gICAgdmFyIHdzY3JZID0gd2luZG93LnNjcm9sbFk7XG4gICAgdmFyIHdzY3JYID0gd2luZG93LnNjcm9sbFg7XG5cbiAgICB2YXIgY3VyWCA9IChkb2N1bWVudC5hbGwpID8gZXZlbnQuY2xpZW50WCArIHdzY3JYIDogZXZlbnQucGFnZVg7XG4gICAgdmFyIGN1clkgPSAoZG9jdW1lbnQuYWxsKSA/IGV2ZW50LmNsaWVudFkgKyB3c2NyWSA6IGV2ZW50LnBhZ2VZO1xuICAgIHZhciB0dGxlZnQgPSAoKGN1clggLSB3c2NyWCArIHhPZmZzZXQgKiAyICsgdHR3KSA+IHdpbmRvdy5pbm5lcldpZHRoKSA/XG4gICAgICAgICAgICAgICAgIGN1clggLSB0dHcgLSB4T2Zmc2V0ICogMiA6IGN1clggKyB4T2Zmc2V0O1xuXG4gICAgaWYgKHR0bGVmdCA8IHdzY3JYICsgeE9mZnNldCkge1xuICAgICAgdHRsZWZ0ID0gd3NjclggKyB4T2Zmc2V0O1xuICAgIH1cblxuICAgIHZhciB0dHRvcCA9ICgoY3VyWSAtIHdzY3JZICsgeU9mZnNldCAqIDIgKyB0dGgpID4gd2luZG93LmlubmVySGVpZ2h0KSA/XG4gICAgICAgICAgICAgICAgY3VyWSAtIHR0aCAtIHlPZmZzZXQgKiAyIDogY3VyWSArIHlPZmZzZXQ7XG5cbiAgICBpZiAodHR0b3AgPCB3c2NyWSArIHlPZmZzZXQpIHtcbiAgICAgIHR0dG9wID0gY3VyWSArIHlPZmZzZXQ7XG4gICAgfVxuXG4gICAgdHQuc3R5bGUoeyB0b3A6IHR0dG9wICsgJ3B4JywgbGVmdDogdHRsZWZ0ICsgJ3B4JyB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc2hvd1Rvb2x0aXA6IHNob3dUb29sdGlwLFxuICAgIGhpZGVUb29sdGlwOiBoaWRlVG9vbHRpcCxcbiAgICB1cGRhdGVQb3NpdGlvbjogdXBkYXRlUG9zaXRpb25cbiAgfTtcbn1cblxuXG5cbi8qIGJ1YmJsZUNoYXJ0IGNyZWF0aW9uIGZ1bmN0aW9uLlxuICpcbiAqL1xuZnVuY3Rpb24gYnViYmxlQ2hhcnQoKSB7XG4gIC8vIENvbnN0YW50cyBmb3Igc2l6aW5nXG5cbiAgdmFyIG1hcmdpbiA9IHt0b3A6IDUwLCBib3R0b206IDIwLCBsZWZ0OiAwLCByaWdodDogMH07XG4gIC8vIHZhciB3aWR0aCA9IDE1MDAgLSBtYXJnaW4ucmlnaHQ7XG4gIC8vIHZhciBoZWlnaHQgPSAxMDAwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG4gIC8vIHZhciBib3VuZGluZ1JlY3QgPSBkMy5zZWxlY3QoJyN2aXMnKS5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHZhciB3aWR0aCA9IE1hdGgubWluKHZpZXdwb3J0V2lkdGgsOTUwKTtcbiAgdmFyIGhlaWdodCA9IDEwNTA7XG4gIGlmKHZpZXdwb3J0V2lkdGggPCA1MDApe1xuICAgIGhlaWdodCA9IDI1MDA7XG4gIH1cbiAgLy8gdmFyIHdpZHRoID0gMTEwMDtcbiAgLy8gdmFyIGhlaWdodCA9IDEwNTA7XG5cbiAgLy8gdG9vbHRpcCBmb3IgbW91c2VvdmVyIGZ1bmN0aW9uYWxpdHlcbiAgdmFyIHRvb2x0aXAgPSBmbG9hdGluZ1Rvb2x0aXAoJ2J1YmJsZV90b29sdGlwJywgMjQwKTtcblxuICAvLyBMb2NhdGlvbnMgdG8gbW92ZSBidWJibGVzIHRvd2FyZHMsIGRlcGVuZGluZ1xuICAvLyBvbiB3aGljaCB2aWV3IG1vZGUgaXMgc2VsZWN0ZWQuXG4gIHZhciBjZW50ZXIgPSB7IHg6IHdpZHRoIC8gMiwgeTogaGVpZ2h0IC8gMiB9O1xuXG4gIHZhciBzZWxidWJibGVzID0gW107XG5cbiAgdmFyIHBvcFNjYWxlUmFuZ2UgPSBbd2lkdGggLyAzLjUsIHdpZHRoIC8gMiwgd2lkdGggLyAxLjRdO1xuICBpZih2aWV3cG9ydFdpZHRoIDwgNTAwKXtcbiAgICBwb3BTY2FsZVJhbmdlPSBbd2lkdGggLyAyLCB3aWR0aCAvIDIsIHdpZHRoIC8gMl1cbiAgfVxuXG4gIHZhciBwb3BTY2FsZSA9IGQzLnNjYWxlT3JkaW5hbCgpXG4gICAgLmRvbWFpbihbJ2xvdycsICdtZWRpdW0nLCAnaGlnaCddKVxuICAgIC5yYW5nZShwb3BTY2FsZVJhbmdlKTtcblxuICB2YXIgZ2VucmVYUmFuZ2UgPSBbd2lkdGgvMyx3aWR0aC8xLjI1XTtcbiAgaWYodmlld3BvcnRXaWR0aCA8IDUwMCl7XG4gICAgZ2VucmVYUmFuZ2UgPSBbd2lkdGgvMix3aWR0aC8yXVxuICB9XG5cbiAgdmFyIGdlbmVyZVhTY2FsZSA9IGQzLnNjYWxlQmFuZCgpXG4gICAgLmRvbWFpbihbJzQnLCAnMicsJzMnLCcxJ10pXG4gICAgLy8gLnJhbmdlKFt3aWR0aCwgd2lkdGgsICh3aWR0aCAvIDIuNzUpLCAod2lkdGggLyAyLjcpLCAod2lkdGggLyAxLjkpLCAod2lkdGggLyAxLjkpLCAod2lkdGggLyAxLjU1KSwgKHdpZHRoIC8gMS41NSksICh3aWR0aCAvIDEuNTUpXSk7XG4gICAgLnJhbmdlKGdlbnJlWFJhbmdlKVxuXG4gIHZhciB1c2VDZW50ZXJzID0ge1xuICAgICdsb3cnOiB7IHg6IHBvcFNjYWxlKCdsb3cnKSwgeTogMTA1MC8zLjUgfSwgLy93aWR0aCAvIDRcbiAgICAnbWVkaXVtJzogeyB4OiBwb3BTY2FsZSgnbWVkaXVtJyksIHk6IDEwNTAvMy41IH0sIC8vd2lkdGggLyAyLjc1XG4gICAgJ2hpZ2gnOiB7IHg6IHBvcFNjYWxlKCdoaWdoJyksIHk6IDEwNTAvMy41IH0gLy93aWR0aCAvIDEuNVxuICB9O1xuXG4gIGlmKHZpZXdwb3J0V2lkdGggPCA1MDApe1xuICAgIHVzZUNlbnRlcnMgPSB7XG4gICAgICAnbG93JzogeyB4OiBwb3BTY2FsZSgnbG93JyksIHk6IDEwNTAgLyAzLjUgKyAxMDUwLzJ9LCAvL3dpZHRoIC8gNFxuICAgICAgJ21lZGl1bSc6IHsgeDogcG9wU2NhbGUoJ21lZGl1bScpLCB5OiAxMDUwIC8gMiB9LCAvL3dpZHRoIC8gMi43NVxuICAgICAgJ2hpZ2gnOiB7IHg6IHBvcFNjYWxlKCdoaWdoJyksIHk6IDEwNTAgLyAzLjUgfSAvL3dpZHRoIC8gMS41XG4gICAgfTtcbiAgfVxuXG4gIC8vIFggbG9jYXRpb25zIG9mIHRoZSB5ZWFyIHRpdGxlcy5cbiAgdmFyIHVzZVRpdGxlWCA9IHtcbiAgICAnTG93JzogIHBvcFNjYWxlKCdsb3cnKSwgLy93aWR0aCAvIDYsXG4gICAgJ01lZGl1bSc6IHBvcFNjYWxlKCdtZWRpdW0nKSwvL3dpZHRoIC8gMi4zLFxuICAgICdIaWdoJzogcG9wU2NhbGUoJ2hpZ2gnKSAvL3dpZHRoIC8gMS4zNVxuICB9O1xuXG4gIHZhciBnZW5yZUNlbnRlcnMgPSB7XG4gICAgJ0NsYXNzaWMgUm9jayc6IHsgeDogZ2VuZXJlWFNjYWxlKCcxJyksIHk6IGhlaWdodCAvIDMuNX0sXG4gICAgJ0luZGllL0FsdGVybmF0aXZlJzogeyB4OiBnZW5lcmVYU2NhbGUoJzEnKSwgeTogaGVpZ2h0IC8gMiB9LFxuICAgICdIaXAgSG9wJzogeyB4OiBnZW5lcmVYU2NhbGUoJzInKSwgeTogaGVpZ2h0IC8gMy41fSxcbiAgICAnRWxlY3Ryb25pYyc6IHsgeDogZ2VuZXJlWFNjYWxlKCcyJyksIHk6IGhlaWdodCAvIDJ9LFxuICAgICdQdW5rJzogeyB4OiBnZW5lcmVYU2NhbGUoJzMnKSwgeTogaGVpZ2h0IC8gMy41fSxcbiAgICAnTWV0YWwnOiB7IHg6IGdlbmVyZVhTY2FsZSgnMycpLCB5OiBoZWlnaHQgLyAyfSxcbiAgICAnT3RoZXInOiB7IHg6IGdlbmVyZVhTY2FsZSgnNCcpLCB5OiBoZWlnaHQgLyAzLjV9LFxuICAgICdKYXp6L1NvdWwnOiB7IHg6IGdlbmVyZVhTY2FsZSgnNCcpLCB5OiBoZWlnaHQgLyAyfSxcbiAgICAnUm9jayc6IHsgeDogZ2VuZXJlWFNjYWxlKCc0JyksIHk6IGhlaWdodCAvIDJ9XG4gIH07XG5cbiAgaWYodmlld3BvcnRXaWR0aCA8IDUwMCl7XG4gICAgZ2VucmVDZW50ZXJzID0ge1xuICAgICAgJ0NsYXNzaWMgUm9jayc6IHsgeDogZ2VuZXJlWFNjYWxlKCcxJyksIHk6IDEwNTAgLyAzLjV9LFxuICAgICAgJ0luZGllL0FsdGVybmF0aXZlJzogeyB4OiBnZW5lcmVYU2NhbGUoJzEnKSwgeTogMTA1MCAvIDIgfSxcbiAgICAgICdIaXAgSG9wJzogeyB4OiBnZW5lcmVYU2NhbGUoJzInKSwgeTogIDEwNTAgLyAzLjUgKyAxMDUwIC8gMn0sXG4gICAgICAnRWxlY3Ryb25pYyc6IHsgeDogZ2VuZXJlWFNjYWxlKCcyJyksIHk6IDEwNTAgLyAyICsgMTA1MCAvIDJ9LFxuICAgICAgJ1B1bmsnOiB7IHg6IGdlbmVyZVhTY2FsZSgnMycpLCB5OiAxMDUwIC8gMy41ICsgMTA1MH0sXG4gICAgICAnTWV0YWwnOiB7IHg6IGdlbmVyZVhTY2FsZSgnMycpLCB5OiAxMDUwIC8gMiArIDEwNTB9LFxuICAgICAgJ090aGVyJzogeyB4OiBnZW5lcmVYU2NhbGUoJzQnKSwgeTogMTA1MCAvIDMuNSArIDEwNTAgKyAxMDUwLzJ9LFxuICAgICAgJ0phenovU291bCc6IHsgeDogZ2VuZXJlWFNjYWxlKCc0JyksIHk6MTA1MCAvIDIgKyAxMDUwICsgMTA1MC8yfSxcbiAgICAgICdSb2NrJzogeyB4OiBnZW5lcmVYU2NhbGUoJzQnKSwgeTogMTA1MCAvIDMuNSArIDEwNTAgKyAxMDUwLzJ9XG4gICAgfTtcbiAgfVxuXG4gIC8vIFggbG9jYXRpb25zIG9mIHRoZSB5ZWFyIHRpdGxlcy5cbiAgdmFyIGdlbnJlVGl0bGVYID0ge1xuICAgICdDbGFzc2ljIFJvY2snOiBnZW5lcmVYU2NhbGUoJzEnKSxcbiAgICAnSW5kaWUvQWx0ZXJuYXRpdmUnOiBnZW5lcmVYU2NhbGUoJzEnKSxcbiAgICAnSGlwIEhvcCc6IGdlbmVyZVhTY2FsZSgnMicpLFxuICAgICdFbGVjdHJvbmljJzogZ2VuZXJlWFNjYWxlKCcyJyksXG4gICAgJ1B1bmsnOiBnZW5lcmVYU2NhbGUoJzMnKSxcbiAgICAnTWV0YWwnOiBnZW5lcmVYU2NhbGUoJzMnKSxcbiAgICAnT3RoZXInOiBnZW5lcmVYU2NhbGUoJzQnKSxcbiAgICAnSmF6ei9Tb3VsJzogZ2VuZXJlWFNjYWxlKCc0JylcblxuICB9O1xuXG4gIC8vIFkgbG9jYXRpb25zIG9mIHRoZSB5ZWFyIHRpdGxlcy5cbiAgdmFyIGdlbnJlVGl0bGVZID0ge1xuICAgICdDbGFzc2ljIFJvY2snOiAwLFxuICAgICdJbmRpZS9BbHRlcm5hdGl2ZSc6IGhlaWdodCAvIDIuNCxcbiAgICAnSGlwIEhvcCc6IDAsXG4gICAgJ0VsZWN0cm9uaWMnOiBoZWlnaHQgLyAyLjQsXG4gICAgJ1B1bmsnOiAwLFxuICAgICdNZXRhbCc6IGhlaWdodCAvIDIuNCxcbiAgICAnT3RoZXInOiAwLFxuICAgICdKYXp6L1NvdWwnOiBoZWlnaHQgLyAyLjQsXG5cbiAgfTtcblxuICAvLyBVc2VkIHdoZW4gc2V0dGluZyB1cCBmb3JjZSBhbmRcbiAgLy8gbW92aW5nIGFyb3VuZCBub2Rlc1xuICB2YXIgZGFtcGVyID0gMC4xMDI7XG5cbiAgLy8gVGhlc2Ugd2lsbCBiZSBzZXQgaW4gY3JlYXRlX25vZGVzIGFuZCBjcmVhdGVfdmlzXG4gIHZhciBzdmcgPSBudWxsO1xuICB2YXIgYnViYmxlcyA9IG51bGw7XG4gIHZhciBub2RlcyA9IFtdO1xuXG4gIHZhciB0ZXh0ID0gW107XG5cbiAgZnVuY3Rpb24gY2hhcmdlKGQpIHtcbiAgICByZXR1cm4gLU1hdGgucG93KGQucmFkaXVzLCAyLjApIC8gNy43O1xuICB9XG5cbiAgdmFyIGZvcmNlID0gZDN2My5sYXlvdXQuZm9yY2UoKVxuICAgIC5zaXplKFt3aWR0aCwgaGVpZ2h0XSlcbiAgICAuY2hhcmdlKGNoYXJnZSlcbiAgICAuZ3Jhdml0eSgtMC4wMTEpXG4gICAgLmZyaWN0aW9uKDAuOSk7XG5cbiAgICB2YXIgZmlsbENvbG9yMiA9IGQzdjMuc2NhbGUub3JkaW5hbCgpXG4gICAgLmRvbWFpbihbJ0NsYXNzaWMgUm9jaycsICdQdW5rJywgJ0luZGllL0FsdGVybmF0aXZlJywgJ01ldGFsJywgJ0hpcCBIb3AnLCAnRWxlY3Ryb25pYycsICdKYXp6L1NvdWwnXSlcbiAgICAucmFuZ2UoWycjZmJiNGFlJywgJyNmZGRhZWMnLCAnI2NjZWJjNScsICcjZGVjYmU0JywgJyNmZWQ5YTYnLCAnI2ZmZmZjYycsJyNiM2NkZTMnLCAnI2YyZjJmMiddKTtcblxuICAvLyBOaWNlIGxvb2tpbmcgY29sb3JzIC0gbm8gcmVhc29uIHRvIGJ1Y2sgdGhlIHRyZW5kXG4gIHZhciBmaWxsQ29sb3IgPSBkM3YzLnNjYWxlLm9yZGluYWwoKVxuICAgIC5kb21haW4oWydsb3cnLCAnbWVkaXVtJywgJ2hpZ2gnXSlcbiAgICAucmFuZ2UoWydyZWQnLCAncmVkJywgJyNiMmUyZTInXSk7XG5cblxuICB2YXIgcmFkaXVzUmFuZ2UgPSBbOCwgNzBdO1xuICBpZih2aWV3cG9ydFdpZHRoIDwgOTUwKXtcbiAgICByYWRpdXNSYW5nZSA9IFs2LCA1MF07XG4gIH1cbiAgaWYodmlld3BvcnRXaWR0aCA8IDQwMCl7XG4gICAgcmFkaXVzUmFuZ2UgPSBbNSwgNDBdO1xuICB9XG5cbiAgdmFyIHJhZGl1c1NjYWxlID0gZDN2My5zY2FsZS5wb3coKVxuICAgIC5leHBvbmVudCgyLjEpXG4gICAgLnJhbmdlKHJhZGl1c1JhbmdlKTtcblxuICBmdW5jdGlvbiBjcmVhdGVOb2RlcyhyYXdEYXRhKSB7XG4gICAgLy8gVXNlIG1hcCgpIHRvIGNvbnZlcnQgcmF3IGRhdGEgaW50byBub2RlIGRhdGEuXG4gICAgLy8gQ2hlY2tvdXQgaHR0cDovL2xlYXJuanNkYXRhLmNvbS8gZm9yIG1vcmUgb25cbiAgICAvLyB3b3JraW5nIHdpdGggZGF0YS5cbiAgICB2YXIgbXlOb2RlcyA9IHJhd0RhdGEubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZC5pZCxcbiAgICAgICAgcmFkaXVzOiByYWRpdXNTY2FsZSgrZC50b3RlKSxcbiAgICAgICAgdmFsdWU6IGQudG90ZSxcbiAgICAgICAgbmFtZTogZC5hcnRpc3QsXG4gICAgICAgIG9yZzogZC5vcmdhbml6YXRpb24sXG4gICAgICAgIGdyb3VwOiBkLmdyb3VwLFxuICAgICAgICBnZW5yZTogZC5nZW5yZSxcbiAgICAgICAgeWVhcjogZC55ZWFyLFxuICAgICAgICB4OiBNYXRoLnJhbmRvbSgpICogK2dlbnJlQ2VudGVyc1tkLmdlbnJlXS54LC8vOTAwLFxuICAgICAgICB5OiBNYXRoLnJhbmRvbSgpICogK2dlbnJlQ2VudGVyc1tkLmdlbnJlXS55XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gc29ydCB0aGVtIHRvIHByZXZlbnQgb2NjbHVzaW9uIG9mIHNtYWxsZXIgbm9kZXMuXG4gICAgbXlOb2Rlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBiLnZhbHVlIC0gYS52YWx1ZTsgfSk7XG5cbiAgICByZXR1cm4gbXlOb2RlcztcbiAgfVxuXG4gIHZhciBjaGFydCA9IGZ1bmN0aW9uIGNoYXJ0KHNlbGVjdG9yLCByYXdEYXRhKSB7XG5cbiAgICB2YXIgbWF4QW1vdW50ID0gZDN2My5tYXgocmF3RGF0YSwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuICtkLnRvdGU7IH0pO1xuICAgIHJhZGl1c1NjYWxlLmRvbWFpbihbMCwgbWF4QW1vdW50XSk7XG5cbiAgICByYXdEYXRhLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYi52YWx1ZSAtIGEudmFsdWU7IH0pO1xuXG4gICAgbm9kZXMgPSBjcmVhdGVOb2RlcyhyYXdEYXRhKTtcbiAgICAvLyBTZXQgdGhlIGZvcmNlJ3Mgbm9kZXMgdG8gb3VyIG5ld2x5IGNyZWF0ZWQgbm9kZXMgYXJyYXkuXG4gICAgZm9yY2Uubm9kZXMobm9kZXMpO1xuXG4gICAgLy8gQ3JlYXRlIGEgU1ZHIGVsZW1lbnQgaW5zaWRlIHRoZSBwcm92aWRlZCBzZWxlY3RvclxuICAgIC8vIHdpdGggZGVzaXJlZCBzaXplLlxuICAgIHN2Z0NvbnRhaW5lciA9IGQzdjMuc2VsZWN0KHNlbGVjdG9yKVxuICAgICAgLmFwcGVuZCgnc3ZnJylcbiAgICAgIC5hdHRyKCd3aWR0aCcsIHdpZHRoKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodClcblxuICAgIHN2ZyA9IHN2Z0NvbnRhaW5lclxuICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoXCIrMCtcIixcIittYXJnaW4udG9wK1wiKVwiKVxuICAgICAgO1xuXG4gICAgLy8gQmluZCBub2RlcyBkYXRhIHRvIHdoYXQgd2lsbCBiZWNvbWUgRE9NIGVsZW1lbnRzIHRvIHJlcHJlc2VudCB0aGVtLlxuICAgIGJ1YmJsZXMgPSBzdmcuYXBwZW5kKFwiZ1wiKS5zZWxlY3RBbGwoJy5idWJibGUnKVxuICAgICAgLmRhdGEobm9kZXMsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmlkOyB9KTtcblxuICAgIC8vIENyZWF0ZSBuZXcgY2lyY2xlIGVsZW1lbnRzIGVhY2ggd2l0aCBjbGFzcyBgYnViYmxlYC5cbiAgICAvLyBUaGVyZSB3aWxsIGJlIG9uZSBjaXJjbGUuYnViYmxlIGZvciBlYWNoIG9iamVjdCBpbiB0aGUgbm9kZXMgYXJyYXkuXG4gICAgLy8gSW5pdGlhbGx5LCB0aGVpciByYWRpdXMgKHIgYXR0cmlidXRlKSB3aWxsIGJlIDAuXG4gICAgYnViYmxlcy5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdnJylcbiAgICAgIC5zb3J0KGZ1bmN0aW9uKGEsYil7XG4gICAgICAgIHJldHVybiBhLnJhZGl1cyAtIGIucmFkaXVzO1xuICAgICAgfSlcbiAgICAgIDsgLy8gbmV3IGJlbG93XG5cbiAgICBidWJibGVzXG4gICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXG4gICAgICAuY2xhc3NlZCgnYnViYmxlJywgdHJ1ZSlcbiAgICAgIC5hdHRyKCdjbGFzcycsICdidWJibGUtY2lyY2xlJylcbiAgICAgIC5hdHRyKCdyJywgZnVuY3Rpb24oZCl7XG4gICAgICAgIHJldHVybiBkLnJhZGl1cy0yO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGZpbGxDb2xvcjIoZC5nZW5yZSk7IH0pXG4gICAgICAuYXR0cignc3Ryb2tlJywgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQzdjMucmdiKGZpbGxDb2xvcjIoZC5nZW5yZSkpLmRhcmtlcigpOyB9KVxuICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIGZ1bmN0aW9uKGQpe1xuICAgICAgICBpZihkLnJhZGl1cyA+IDE3KXtcbiAgICAgICAgICByZXR1cm4gMS41O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAuNzVcbiAgICAgIH0pXG4gICAgICAub24oJ21vdXNlb3ZlcicsIHNob3dEZXRhaWwpXG4gICAgICAub24oJ21vdXNlb3V0JywgaGlkZURldGFpbClcbiAgICAgIC8vIC5jYWxsKGZvcmNlLmRyYWcpO1xuXG4gICAgYnViYmxlc1xuICAgICAgLmZpbHRlcihmdW5jdGlvbihkKXtcbiAgICAgICAgcmV0dXJuIGQucmFkaXVzID4gMTc7XG4gICAgICB9KVxuICAgICAgLmFwcGVuZChcInRleHRcIilcbiAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpe1xuICAgICAgICByZXR1cm4gZC5uYW1lO1xuICAgICAgfSlcbiAgICAgIDtcblxuICAgIHZhciBnZW5yZURhdGEgPSBkM3YzLmtleXMoZ2VucmVUaXRsZVgpO1xuXG4gICAgZ2VucmVMYWJlbHMgPSBzdmcuYXBwZW5kKFwiZ1wiKS5zZWxlY3RBbGwoJy5nZW5yZScpXG4gICAgICAuZGF0YShnZW5yZURhdGEpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsZnVuY3Rpb24oZCl7XG4gICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIitnZW5yZVRpdGxlWFtkXStcIixcIitnZW5yZVRpdGxlWVtkXStcIilcIlxuICAgICAgfSlcbiAgICAgIDtcblxuICAgIGdlbnJlTGFiZWxzLmFwcGVuZCgndGV4dCcpXG4gICAgICAuYXR0cignY2xhc3MnLCAndGl0bGUnKVxuICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAudGV4dChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZDsgfSlcbiAgICAgIC5zdHlsZShcImZpbGxcIixmdW5jdGlvbihkKXtcbiAgICAgICAgcmV0dXJuIGQzdjMucmdiKGZpbGxDb2xvcjIoZCkpLmRhcmtlcigxLjUpO1xuICAgICAgfSlcbiAgICAgIDtcblxuICAgIGdlbnJlTGFiZWxzLmFwcGVuZCgncmVjdCcpXG4gICAgICAuYXR0cignY2xhc3MnLCAndGl0bGUtYmFyJylcbiAgICAgIC5hdHRyKFwid2lkdGhcIiw1MClcbiAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsMilcbiAgICAgIC5hdHRyKFwieFwiLC0yNSlcbiAgICAgIC5hdHRyKFwieVwiLDEwKVxuICAgICAgLnN0eWxlKFwiZmlsbFwiLGZ1bmN0aW9uKGQpe1xuICAgICAgICByZXR1cm4gZDN2My5yZ2IoZmlsbENvbG9yMihkKSkuZGFya2VyKCk7XG4gICAgICB9KVxuICAgICAgO1xuXG4gICAgdmFyIHVzZURhdGEgPSBkM3YzLmtleXModXNlVGl0bGVYKTtcblxuICAgIHVzZSA9IHN2Zy5zZWxlY3RBbGwoJy5ncm91cCcpXG4gICAgICAuZGF0YSh1c2VEYXRhKVxuICAgICAgLmVudGVyKCkuYXBwZW5kKCd0ZXh0JylcbiAgICAgIC5hdHRyKCdjbGFzcycsICd5ZWFyJylcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsZnVuY3Rpb24oZCl7XG4gICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIit1c2VUaXRsZVhbZF0rXCIsXCIrMTAwK1wiKVwiXG4gICAgICB9KVxuICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAudGV4dChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZDsgfSlcbiAgICAgIDtcblxuICAgIHN2Zy5zZWxlY3RBbGwoJy5idWJibGUtbGFiZWwnKVxuICAgICAgICAuYXR0cigndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XG4gICAgLy8gaGlkZSBwb3B1bGFyaXR5IGF4aXNcbiAgICBkMy5zZWxlY3QoJy5idWJibGUtYXhpcycpXG4gICAgICAgIC5hdHRyKFwieDJcIiwgd2lkdGggLyA3KVxuICAgICAgICAuYXR0cihcInkyXCIsIGhlaWdodCAvIDExKVxuICAgICAgICAuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKVxuICAgICAgICA7XG5cbiAgICBkMy5zZWxlY3RBbGwoJy5idWJibGUtYXhpcy10ZXh0JylcbiAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMCk7XG5cblxuICAgIGdyb3VwQnViYmxlcygpO1xuICB9O1xuXG4gIGQzdjMuc2VsZWN0KFwiI3NlYXJjaFwiKVxuICAgICAgLm9uKFwia2V5dXBcIiwgZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICB2YXIgc2VhcmNoZWRfZGF0YSA9IG5vZGVzLFxuICAgICAgICAgICAgdGV4dCA9IHRoaXMudmFsdWUudHJpbSgpO1xuICAgICAgICBpZiAodGV4dCAhPSBcIlwiICYgdGV4dCAhPSBcIm5vbmVcIikge1xuXG4gICAgICAgICAgICB2YXIgc2VhcmNoUmVzdWx0cyA9IHNlYXJjaGVkX2RhdGEubWFwKGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCJeXCIgKyB0ZXh0ICsgXCIuKlwiLCBcImlcIik7XG4gICAgICAgICAgICBpZiAocmVnZXgudGVzdChyLm5hbWUpKSB7IC8vIGlmIHRoZXJlIGFyZSBhbnkgcmVzdWx0c1xuICAgICAgICAgICAgICByZXR1cm4gcmVnZXguZXhlYyhyLm5hbWUpWzBdOyAvLyByZXR1cm4gdGhlbSB0byBzZWFyY2hSZXN1bHRzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gZmlsdGVyIGJsYW5rIGVudHJpZXMgZnJvbSBzZWFyY2hSZXN1bHRzXG4gICAgICAgICAgc2VhcmNoUmVzdWx0cyA9IHNlYXJjaFJlc3VsdHMuZmlsdGVyKGZ1bmN0aW9uKHIpe1xuICAgICAgICAgICAgcmV0dXJuIHIgIT0gdW5kZWZpbmVkO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIGZpbHRlciBkYXRhc2V0IHdpdGggc2VhcmNoUmVzdWx0c1xuICAgICAgICAgIHNlYXJjaGVkX2RhdGEgPSBzZWFyY2hSZXN1bHRzLm1hcChmdW5jdGlvbihyKSB7XG4gICAgICAgICAgICAgcmV0dXJuIG5vZGVzLmZpbHRlcihmdW5jdGlvbihwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwLm5hbWUuaW5kZXhPZihyKSAhPSAtMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gZmxhdHRlbiBhcnJheVxuICAgICAgICAgIHNlYXJjaGVkX2RhdGEgPSBbXS5jb25jYXQuYXBwbHkoW10sIHNlYXJjaGVkX2RhdGEpOyAvLyBUaGlzIGZpbmRzIHRoZSBkYXRhIHdlIHdhbnRcbiAgICAgICAgICAgIC8vIGRhdGEgYmluZCB3aXRoIG5ldyBkYXRhXG4gICAgICAgICAgc2VsYnViYmxlcyA9IGJ1YmJsZXMuc2VsZWN0QWxsKCcuYnViYmxlLWNpcmNsZScpLmRhdGEoc2VhcmNoZWRfZGF0YSwgZnVuY3Rpb24oZCl7IHJldHVybiBkLm5hbWV9KTtcbiAgICAgICAgICAvLyBTdHlsZSBzZWxlY3Qgbm9kZXNcbiAgICAgICAgICBzZWxidWJibGVzXG4gICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAuNzUpXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIDMuNSlcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ2JsYWNrJyk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkM3YzLnNlbGVjdEFsbCgnLmJ1YmJsZS1jaXJjbGUnKVxuICAgICAgICAgICAgLnN0eWxlKFwib3BhY2l0eVwiLCBudWxsKVxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCBudWxsKVxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCBudWxsKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgc2VsYnViYmxlc1xuICAgICAgICAuZXhpdCgpXG4gICAgICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIG51bGwpXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIG51bGwpXG4gICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIG51bGwpO1xuXG5cblxuICAgICAgfSk7XG5cbiAgZnVuY3Rpb24gZ3JvdXBCdWJibGVzKCkge1xuICAgIGhpZGVZZWFycygpO1xuICAgIGhpZGVVc2UoKTtcbiAgICBzaG93R2VucmUoKTtcblxuICAgIHZhciBtaW5ZVXNlID0ge1xuICAgICAgJ2hpZ2gnOiAxMDAwMDAwMDAsXG4gICAgICAnbWVkaXVtJzogMTAwMDAwMDAwLFxuICAgICAgJ2xvdyc6IDEwMDAwMDAwMFxuICAgIH1cblxuICAgIHZhciBtaW5YVXNlID0ge1xuICAgICAgJ2hpZ2gnOiAxMDAwMDAwMDAsXG4gICAgICAnbWVkaXVtJzogMTAwMDAwMDAwLFxuICAgICAgJ2xvdyc6IDEwMDAwMDAwMFxuICAgIH1cblxuICAgIHZhciBtYXhYVXNlID0ge1xuICAgICAgJ2hpZ2gnOiAtMTAwMDAwMDAwLFxuICAgICAgJ21lZGl1bSc6IC0xMDAwMDAwMDAsXG4gICAgICAnbG93JzogLTEwMDAwMDAwMFxuICAgIH1cblxuXG4gICAgdmFyIG1pblkgPSB7XG4gICAgICAnQ2xhc3NpYyBSb2NrJzogMTAwMDAwMDAwLFxuICAgICAgJ0luZGllL0FsdGVybmF0aXZlJzogMTAwMDAwMDAwLFxuICAgICAgJ0hpcCBIb3AnOiAxMDAwMDAwMDAsXG4gICAgICAnRWxlY3Ryb25pYyc6IDEwMDAwMDAwMCxcbiAgICAgICdQdW5rJzogMTAwMDAwMDAwLFxuICAgICAgJ01ldGFsJzogMTAwMDAwMDAwLFxuICAgICAgJ090aGVyJzogMTAwMDAwMDAwLFxuICAgICAgJ0phenovU291bCc6IDEwMDAwMDAwMCxcbiAgICB9XG5cbiAgICB2YXIgbWluWCA9IHtcbiAgICAgICdDbGFzc2ljIFJvY2snOiAxMDAwMDAwMDAsXG4gICAgICAnSW5kaWUvQWx0ZXJuYXRpdmUnOiAxMDAwMDAwMDAsXG4gICAgICAnSGlwIEhvcCc6IDEwMDAwMDAwMCxcbiAgICAgICdFbGVjdHJvbmljJzogMTAwMDAwMDAwLFxuICAgICAgJ1B1bmsnOiAxMDAwMDAwMDAsXG4gICAgICAnTWV0YWwnOiAxMDAwMDAwMDAsXG4gICAgICAnT3RoZXInOiAxMDAwMDAwMDAsXG4gICAgICAnSmF6ei9Tb3VsJzogMTAwMDAwMDAwLFxuICAgIH1cblxuICAgIHZhciBtYXhYID0ge1xuICAgICAgJ0NsYXNzaWMgUm9jayc6IC0xMDAwMDAwMDAsXG4gICAgICAnSW5kaWUvQWx0ZXJuYXRpdmUnOiAtMTAwMDAwMDAwLFxuICAgICAgJ0hpcCBIb3AnOiAtMTAwMDAwMDAwLFxuICAgICAgJ0VsZWN0cm9uaWMnOiAtMTAwMDAwMDAwLFxuICAgICAgJ1B1bmsnOiAtMTAwMDAwMDAwLFxuICAgICAgJ01ldGFsJzogLTEwMDAwMDAwMCxcbiAgICAgICdPdGhlcic6IC0xMDAwMDAwMDAsXG4gICAgICAnSmF6ei9Tb3VsJzogLTEwMDAwMDAwMCxcbiAgICB9XG5cbiAgICBmb3JjZS5vbigndGljaycsIGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgIGlmIChlLmFscGhhID49IC4wMykge1xuXG4gICAgICAgIGJ1YmJsZXNcbiAgICAgICAgICAuZWFjaChtb3ZlVG9HZW5yZSgxLjA1KmUuYWxwaGEpKVxuXG4gICAgICAgIGJ1YmJsZXNcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIitkLngrXCIsXCIrZC55K1wiKVwiO1xuICAgICAgICAgIH0pXG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIGZvcmNlLnN0b3AoKTtcblxuICAgICAgICAgIGJ1YmJsZXMuZWFjaChmdW5jdGlvbihkLGkpe1xuICAgICAgICAgICAgaWYoZC55IDwgbWluWVVzZVtkW1wiZ3JvdXBcIl1dKXtcbiAgICAgICAgICAgICAgbWluWVVzZVtkW1wiZ3JvdXBcIl1dID0gZC55XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihkLnkgPCBtaW5ZW2RbXCJnZW5yZVwiXV0pe1xuICAgICAgICAgICAgICBtaW5ZW2RbXCJnZW5yZVwiXV0gPSBkLnlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGQueCA8IG1pblhVc2VbZFtcImdyb3VwXCJdXSl7XG4gICAgICAgICAgICAgIG1pblhVc2VbZFtcImdyb3VwXCJdXSA9IGQueFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZC54IDwgbWluWFtkW1wiZ2VucmVcIl1dKXtcbiAgICAgICAgICAgICAgbWluWFtkW1wiZ2VucmVcIl1dID0gZC54XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihkLnggPiBtYXhYW2RbXCJnZW5yZVwiXV0pe1xuICAgICAgICAgICAgICBtYXhYW2RbXCJnZW5yZVwiXV0gPSBkLnhcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGQueCA+IG1heFhVc2VbZFtcImdyb3VwXCJdXSl7XG4gICAgICAgICAgICAgIG1heFhVc2VbZFtcImdyb3VwXCJdXSA9IGQueFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBnZW5yZUxhYmVsc1xuICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgLmR1cmF0aW9uKDUwMClcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaGVyZVwiKTtcbiAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiKygobWF4WFtkXS1taW5YW2RdKS8yK21pblhbZF0pK1wiLFwiKyhtaW5ZW2RdIC0gNTApK1wiKVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIHVzZS5hdHRyKFwidHJhbnNmb3JtXCIsZnVuY3Rpb24oZCl7XG4gICAgICAgICAgLy8gICB2YXIgZ3JvdXAgPSBkLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgLy8gICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIrKChtYXhYVXNlW2dyb3VwXS1taW5YVXNlW2dyb3VwXSkvMittaW5YVXNlW2dyb3VwXSkrXCIsXCIrKG1pbllVc2VbZ3JvdXBdIC0gNTApK1wiKVwiXG4gICAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBmb3JjZS5zdGFydCgpO1xuXG5cbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVUb0NlbnRlcihhbHBoYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCkge1xuICAgICAgZC54ID0gZC54ICsgKGNlbnRlci54IC0gZC54KSAqIGRhbXBlciAqIGFscGhhO1xuICAgICAgZC55ID0gZC55ICsgKGNlbnRlci55IC0gZC55KSAqIGRhbXBlciAqIGFscGhhO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBzcGxpdEJ1YmJsZXMoKSB7XG4gICAgc2hvd1llYXJzKCk7XG5cbiAgICBmb3JjZS5vbigndGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBidWJibGVzLmVhY2gobW92ZVRvWWVhcnMoZS5hbHBoYSkpXG4gICAgICAgIC5hdHRyKCdjeCcsIGZ1bmN0aW9uIChkKSB7cmV0dXJuIGQueDsgfSlcbiAgICAgICAgLmF0dHIoJ2N5JywgZnVuY3Rpb24gKGQpIHtyZXR1cm4gZC55OyB9KTtcbiAgICB9KTtcblxuXG4gICAgZm9yY2Uuc3RhcnQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNwbGl0QnViYmxlc1VzZSgpIHtcbiAgICBoaWRlR2VucmUoKTtcbiAgICBzaG93VXNlKCk7XG5cbiAgICB2YXIgbWluWVVzZSA9IHtcbiAgICAgICdoaWdoJzogMTAwMDAwMDAwLFxuICAgICAgJ21lZGl1bSc6IDEwMDAwMDAwMCxcbiAgICAgICdsb3cnOiAxMDAwMDAwMDBcbiAgICB9XG5cbiAgICB2YXIgbWluWFVzZSA9IHtcbiAgICAgICdoaWdoJzogMTAwMDAwMDAwLFxuICAgICAgJ21lZGl1bSc6IDEwMDAwMDAwMCxcbiAgICAgICdsb3cnOiAxMDAwMDAwMDBcbiAgICB9XG5cbiAgICB2YXIgbWF4WFVzZSA9IHtcbiAgICAgICdoaWdoJzogLTEwMDAwMDAwMCxcbiAgICAgICdtZWRpdW0nOiAtMTAwMDAwMDAwLFxuICAgICAgJ2xvdyc6IC0xMDAwMDAwMDBcbiAgICB9XG5cblxuICAgIHZhciBtaW5ZID0ge1xuICAgICAgJ0NsYXNzaWMgUm9jayc6IDEwMDAwMDAwMCxcbiAgICAgICdJbmRpZS9BbHRlcm5hdGl2ZSc6IDEwMDAwMDAwMCxcbiAgICAgICdIaXAgSG9wJzogMTAwMDAwMDAwLFxuICAgICAgJ0VsZWN0cm9uaWMnOiAxMDAwMDAwMDAsXG4gICAgICAnUHVuayc6IDEwMDAwMDAwMCxcbiAgICAgICdNZXRhbCc6IDEwMDAwMDAwMCxcbiAgICAgICdPdGhlcic6IDEwMDAwMDAwMCxcbiAgICAgICdKYXp6L1NvdWwnOiAxMDAwMDAwMDAsXG4gICAgfVxuXG4gICAgdmFyIG1pblggPSB7XG4gICAgICAnQ2xhc3NpYyBSb2NrJzogMTAwMDAwMDAwLFxuICAgICAgJ0luZGllL0FsdGVybmF0aXZlJzogMTAwMDAwMDAwLFxuICAgICAgJ0hpcCBIb3AnOiAxMDAwMDAwMDAsXG4gICAgICAnRWxlY3Ryb25pYyc6IDEwMDAwMDAwMCxcbiAgICAgICdQdW5rJzogMTAwMDAwMDAwLFxuICAgICAgJ01ldGFsJzogMTAwMDAwMDAwLFxuICAgICAgJ090aGVyJzogMTAwMDAwMDAwLFxuICAgICAgJ0phenovU291bCc6IDEwMDAwMDAwMCxcbiAgICB9XG5cbiAgICB2YXIgbWF4WCA9IHtcbiAgICAgICdDbGFzc2ljIFJvY2snOiAtMTAwMDAwMDAwLFxuICAgICAgJ0luZGllL0FsdGVybmF0aXZlJzogLTEwMDAwMDAwMCxcbiAgICAgICdIaXAgSG9wJzogLTEwMDAwMDAwMCxcbiAgICAgICdFbGVjdHJvbmljJzogLTEwMDAwMDAwMCxcbiAgICAgICdQdW5rJzogLTEwMDAwMDAwMCxcbiAgICAgICdNZXRhbCc6IC0xMDAwMDAwMDAsXG4gICAgICAnT3RoZXInOiAtMTAwMDAwMDAwLFxuICAgICAgJ0phenovU291bCc6IC0xMDAwMDAwMDAsXG4gICAgfVxuXG5cbiAgICBmb3JjZS5vbigndGljaycsIGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgIC8vIGJ1YmJsZXMuZWFjaChtb3ZlVG9Vc2UoZS5hbHBoYSkpXG4gICAgICAvLyAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoZCkge1xuICAgICAgLy8gICAgIHJldHVybiBcInRyYW5zbGF0ZShcIitkLngrXCIsXCIrZC55K1wiKVwiO1xuICAgICAgLy8gICB9KVxuXG4gICAgICBpZiAoZS5hbHBoYSA+PSAuMDMpIHtcblxuICAgICAgICBidWJibGVzXG4gICAgICAgICAgLmVhY2gobW92ZVRvVXNlKDEuMDUqZS5hbHBoYSkpXG5cbiAgICAgICAgYnViYmxlc1xuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiK2QueCtcIixcIitkLnkrXCIpXCI7XG4gICAgICAgICAgfSlcblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgZm9yY2Uuc3RvcCgpO1xuXG4gICAgICAgICAgYnViYmxlcy5lYWNoKGZ1bmN0aW9uKGQsaSl7XG4gICAgICAgICAgICBpZihkLnkgPCBtaW5ZVXNlW2RbXCJncm91cFwiXV0pe1xuICAgICAgICAgICAgICBtaW5ZVXNlW2RbXCJncm91cFwiXV0gPSBkLnlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGQueSA8IG1pbllbZFtcImdlbnJlXCJdXSl7XG4gICAgICAgICAgICAgIG1pbllbZFtcImdlbnJlXCJdXSA9IGQueVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZC54IDwgbWluWFVzZVtkW1wiZ3JvdXBcIl1dKXtcbiAgICAgICAgICAgICAgbWluWFVzZVtkW1wiZ3JvdXBcIl1dID0gZC54XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihkLnggPCBtaW5YW2RbXCJnZW5yZVwiXV0pe1xuICAgICAgICAgICAgICBtaW5YW2RbXCJnZW5yZVwiXV0gPSBkLnhcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGQueCA+IG1heFhbZFtcImdlbnJlXCJdXSl7XG4gICAgICAgICAgICAgIG1heFhbZFtcImdlbnJlXCJdXSA9IGQueFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZC54ID4gbWF4WFVzZVtkW1wiZ3JvdXBcIl1dKXtcbiAgICAgICAgICAgICAgbWF4WFVzZVtkW1wiZ3JvdXBcIl1dID0gZC54XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIGdlbnJlTGFiZWxzLmF0dHIoXCJ0cmFuc2Zvcm1cIixmdW5jdGlvbihkKXtcbiAgICAgICAgICAvLyAgIHJldHVybiBcInRyYW5zbGF0ZShcIisoKG1heFhbZF0tbWluWFtkXSkvMittaW5YW2RdKStcIixcIisobWluWVtkXSAtIDUwKStcIilcIlxuICAgICAgICAgIC8vIH0pO1xuXG4gICAgICAgICAgdXNlXG4gICAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAuZHVyYXRpb24oNTAwKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIixmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIrKChtYXhYVXNlW2dyb3VwXS1taW5YVXNlW2dyb3VwXSkvMittaW5YVXNlW2dyb3VwXSkrXCIsXCIrKG1pbllVc2VbZ3JvdXBdIC0gNTApK1wiKVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgIGZvcmNlLnN0YXJ0KCk7XG4gIH1cblxuXG4gIGZ1bmN0aW9uIHNwbGl0QnViYmxlc0dlbnJlKCkge1xuICAgIGhpZGVVc2UoKTtcbiAgICBzaG93R2VucmUoKTtcblxuICAgIGZvcmNlLm9uKCd0aWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGJ1YmJsZXMuZWFjaChtb3ZlVG9HZW5yZShlLmFscGhhKSlcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiK2QueCtcIixcIitkLnkrXCIpXCI7XG4gICAgICAgIH0pXG4gICAgfSk7XG5cbiAgICBmb3JjZS5zdGFydCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gbW92ZVRvWWVhcnMoYWxwaGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHtcbiAgICAgIHZhciB0YXJnZXQgPSB5ZWFyQ2VudGVyc1tkLnllYXJdO1xuICAgICAgZC54ID0gZC54ICsgKHRhcmdldC54IC0gZC54KSAqIGRhbXBlciAqIGFscGhhICogMS4xO1xuICAgICAgZC55ID0gZC55ICsgKHRhcmdldC55IC0gZC55KSAqIGRhbXBlciAqIGFscGhhICogMS4xO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBoaWRlWWVhcnMoKSB7XG4gICAgc3ZnLnNlbGVjdEFsbCgnLnllYXInKS5zdHlsZShcInZpc2liaWxpdHlcIixcImhpZGRlblwiKVxuICB9XG5cbiAgLypcbiAgICogU2hvd3MgWWVhciB0aXRsZSBkaXNwbGF5cy5cbiAgICovXG4gIGZ1bmN0aW9uIHNob3dZZWFycygpIHtcbiAgICAvLyBBbm90aGVyIHdheSB0byBkbyB0aGlzIHdvdWxkIGJlIHRvIGNyZWF0ZVxuICAgIC8vIHRoZSB5ZWFyIHRleHRzIG9uY2UgYW5kIHRoZW4ganVzdCBoaWRlIHRoZW0uXG4gICAgdmFyIHllYXJzRGF0YSA9IGQzdjMua2V5cyh5ZWFyc1RpdGxlWCk7XG4gICAgdmFyIHllYXJzID0gc3ZnLnNlbGVjdEFsbCgnLnllYXInKVxuICAgICAgLmRhdGEoeWVhcnNEYXRhKTtcblxuICAgIHllYXJzLmVudGVyKCkuYXBwZW5kKCd0ZXh0JylcbiAgICAgIC5hdHRyKCdjbGFzcycsICd5ZWFyJylcbiAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIHllYXJzVGl0bGVYW2RdOyB9KVxuICAgICAgLmF0dHIoJ3knLCA0MClcbiAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKVxuICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQ7IH0pXG4gICAgICA7XG4gIH1cblxuXG4gIGZ1bmN0aW9uIG1vdmVUb1VzZShhbHBoYSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCkge1xuICAgICAgdmFyIHRhcmdldCA9IHVzZUNlbnRlcnNbZC5ncm91cF07XG4gICAgICBkLnggPSBkLnggKyAodGFyZ2V0LnggLSBkLngpICogZGFtcGVyICogYWxwaGEgKiAxLjE7XG4gICAgICBkLnkgPSBkLnkgKyAodGFyZ2V0LnkgLSBkLnkpICogZGFtcGVyICogYWxwaGEgKiAxLjE7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGVVc2UoKSB7XG4gICAgc3ZnLnNlbGVjdEFsbCgnLnllYXInKS5zdHlsZShcInZpc2liaWxpdHlcIixcImhpZGRlblwiKVxuICB9XG5cbiAgZnVuY3Rpb24gc2hvd1VzZSgpIHtcbiAgICBzdmcuc2VsZWN0QWxsKCcueWVhcicpLnN0eWxlKFwidmlzaWJpbGl0eVwiLFwidmlzaWJsZVwiKVxuICB9XG5cbiAgZnVuY3Rpb24gbW92ZVRvR2VucmUoYWxwaGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHtcbiAgICAgIHZhciB0YXJnZXQgPSBnZW5yZUNlbnRlcnNbZC5nZW5yZV07XG4gICAgICBkLnggPSBkLnggKyAodGFyZ2V0LnggLSBkLngpICogZGFtcGVyICogYWxwaGEgKiAxLjE7XG4gICAgICBkLnkgPSBkLnkgKyAodGFyZ2V0LnkgLSBkLnkpICogZGFtcGVyICogYWxwaGEgKiAxLjE7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGVHZW5yZSgpIHtcbiAgICBzdmcuc2VsZWN0QWxsKCcudGl0bGUnKS5zdHlsZShcInZpc2liaWxpdHlcIixcImhpZGRlblwiKVxuICAgIHN2Zy5zZWxlY3RBbGwoJy50aXRsZS1iYXInKS5zdHlsZShcInZpc2liaWxpdHlcIixcImhpZGRlblwiKVxuICAgIHN2Zy5zZWxlY3RBbGwoJy5idWJibGUtbGFiZWwnKS5hdHRyKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd0dlbnJlKCkge1xuICAgIHN2Zy5zZWxlY3RBbGwoJy50aXRsZScpLnN0eWxlKFwidmlzaWJpbGl0eVwiLFwidmlzaWJsZVwiKVxuICAgIHN2Zy5zZWxlY3RBbGwoJy50aXRsZS1iYXInKS5zdHlsZShcInZpc2liaWxpdHlcIixcInZpc2libGVcIilcbiAgICBzdmcuc2VsZWN0QWxsKCcuYnViYmxlLWxhYmVsJykuYXR0cigndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XG4gICAgLy8gQW5vdGhlciB3YXkgdG8gZG8gdGhpcyB3b3VsZCBiZSB0byBjcmVhdGVcbiAgICAvLyB0aGUgeWVhciB0ZXh0cyBvbmNlIGFuZCB0aGVuIGp1c3QgaGlkZSB0aGVtLlxuICB9XG5cbiAgZnVuY3Rpb24gc2hvd0RldGFpbChkKSB7XG4gICAgdmFyIGNvbnRlbnQgPVxuICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ0dHRleHRcIj48c3BhbiBjbGFzcz1cIm5hbWVcIj5BcnRpc3Q6IDwvc3Bhbj48c3BhbiBjbGFzcz1cInZhbHVlXCI+JyArXG4gICAgICAgICAgICAgICAgICBkLm5hbWUgK1xuICAgICAgICAgICAgICAgICAgJzwvc3Bhbj48YnIvPicgK1xuICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwibmFtZVwiPkFtb3VudCBVc2VkOiA8L3NwYW4+PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPicgK1xuICAgICAgICAgICAgICAgICAgZC52YWx1ZSArXG4gICAgICAgICAgICAgICAgICAnPC9zcGFuPjxici8+JyArXG4gICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJuYW1lXCI+R2VucmU6IDwvc3Bhbj48c3BhbiBjbGFzcz1cInZhbHVlXCI+JyArXG4gICAgICAgICAgICAgICAgICBkLmdlbnJlICtcbiAgICAgICAgICAgICAgICAgICc8L3NwYW4+PGJyLz48L2Rpdj4nO1xuICAgIHRvb2x0aXAuc2hvd1Rvb2x0aXAoY29udGVudCwgZDN2My5ldmVudCk7XG4gIH1cblxuICBmdW5jdGlvbiBoaWRlRGV0YWlsKGQpIHtcbiAgICB0b29sdGlwLmhpZGVUb29sdGlwKCk7XG4gIH1cblxuICBjaGFydC50b2dnbGVEaXNwbGF5ID0gZnVuY3Rpb24gKGRpc3BsYXlOYW1lKSB7XG4gICAgaWYgKGRpc3BsYXlOYW1lID09PSAneWVhcicpIHtcbiAgICAgIHNwbGl0QnViYmxlcygpO1xuICAgIH0gZWxzZSBpZiAoZGlzcGxheU5hbWUgPT0gJ3VzZScpIHtcbiAgICAgIHNwbGl0QnViYmxlc1VzZSgpO1xuICAgICAgaWYodmlld3BvcnRXaWR0aCA8IDUwMCl7XG4gICAgICAgIHN2Z0NvbnRhaW5lci5hdHRyKFwiaGVpZ2h0XCIsMTA1MClcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIHN2Z0NvbnRhaW5lci5hdHRyKFwiaGVpZ2h0XCIsNzAwKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGlzcGxheU5hbWUgPT0gJ2dlbnJlJykge1xuICAgICAgZ3JvdXBCdWJibGVzKCk7XG4gICAgICBpZih2aWV3cG9ydFdpZHRoIDwgNTAwKXtcbiAgICAgICAgc3ZnQ29udGFpbmVyLmF0dHIoXCJoZWlnaHRcIiwyNTAwKVxuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgc3ZnQ29udGFpbmVyLmF0dHIoXCJoZWlnaHRcIiw5MDApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGdyb3VwQnViYmxlcygpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gY2hhcnQ7XG59XG5cbnZhciBteUJ1YmJsZUNoYXJ0ID0gYnViYmxlQ2hhcnQoKTtcblxuZnVuY3Rpb24gZGlzcGxheShlcnJvciwgZGF0YSkge1xuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gIH1cblxuICBteUJ1YmJsZUNoYXJ0KCcjdmlzJywgZGF0YSk7XG59XG5cbmZ1bmN0aW9uIHNldHVwQnV0dG9ucygpIHtcbiAgZDN2My5zZWxlY3QoJyN0b29sYmFyJylcbiAgICAuc2VsZWN0QWxsKCcuYnV0dG9uJylcbiAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gUmVtb3ZlIGFjdGl2ZSBjbGFzcyBmcm9tIGFsbCBidXR0b25zXG4gICAgICBkM3YzLnNlbGVjdEFsbCgnLmJ1dHRvbicpLmNsYXNzZWQoJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgIC8vIEZpbmQgdGhlIGJ1dHRvbiBqdXN0IGNsaWNrZWRcbiAgICAgIHZhciBidXR0b24gPSBkM3YzLnNlbGVjdCh0aGlzKTtcblxuICAgICAgLy8gU2V0IGl0IGFzIHRoZSBhY3RpdmUgYnV0dG9uXG4gICAgICBidXR0b24uY2xhc3NlZCgnYWN0aXZlJywgdHJ1ZSk7XG5cbiAgICAgIC8vIEdldCB0aGUgaWQgb2YgdGhlIGJ1dHRvblxuICAgICAgdmFyIGJ1dHRvbklkID0gYnV0dG9uLmF0dHIoJ2lkJyk7XG5cbiAgICAgIC8vIFRvZ2dsZSB0aGUgYnViYmxlIGNoYXJ0IGJhc2VkIG9uXG4gICAgICAvLyB0aGUgY3VycmVudGx5IGNsaWNrZWQgYnV0dG9uLlxuICAgICAgbXlCdWJibGVDaGFydC50b2dnbGVEaXNwbGF5KGJ1dHRvbklkKTtcbiAgICB9KTtcbn1cblxuZDN2My5jc3YoJ2Fzc2V0cy9zb3VuZHRyYWNrX2RhdGEuY3N2JywgZGlzcGxheSk7XG5cbi8vIHNldHVwIHRoZSBidXR0b25zLlxuc2V0dXBCdXR0b25zKCk7XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBpbml0LCByZXNpemUgfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvYnViYmxlcy5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction resize() {}\n\nfunction init() {\n\n  var WaffleChart = function WaffleChart() {\n\n    var $_selector, $_title, $_data, $_label, $_cellSize, $_cellGap, $_rows, $_columns, $_rounded, $_keys, $_useWidth, $_useLegend;\n\n    var defaults = {\n      size: 3,\n      rows: 25,\n      columns: 50,\n      rounded: false,\n      gap: 2,\n      useLegend: false\n    };\n\n    function generatedWaffleChart() {\n\n      $_keys = d3v3.keys($_data[0]);\n\n      var obj = {\n        selector: $_selector,\n        title: $_title,\n        data: $_data,\n        label: $_label,\n        size: $_cellSize,\n        gap: $_cellGap,\n        rows: $_rows,\n        columns: $_columns,\n        rounded: $_rounded\n      };\n\n      drawWaffleChart(obj);\n    }\n\n    function drawWaffleChart(_obj) {\n\n      if (!_obj.size) {\n        _obj.size = defaults.size;\n      }\n      if (!_obj.rows) {\n        _obj.rows = defaults.rows;\n      }\n      if (!_obj.columns) {\n        _obj.columns = defaults.columns;\n      }\n      if (_obj.gap === undefined) {\n        _obj.gap = defaults.gap;\n      }\n      if (_obj.rounded === undefined) {\n        _obj.columns = defaults.rounded;\n      }\n\n      var formattedData = [];\n      var domain = [];\n      var value = $_keys[$_keys.length - 1];\n      var total = d3v3.sum(_obj.data, function (d) {\n        return d[value];\n      });\n\n      if ($_useWidth) {\n        var forcedWidth = d3v3.select(_obj.selector).node().getBoundingClientRect().width;\n        _obj.columns = Math.floor(forcedWidth / (_obj.size + _obj.gap));\n      }\n\n      var squareVal = total / (_obj.rows * _obj.columns);\n\n      _obj.data.forEach(function (d, i) {\n        d[value] = +d[value];\n        d.units = Math.floor(d[value] / squareVal);\n        Array(d.units + 1).join(1).split('').map(function () {\n          formattedData.push({\n            squareVal: squareVal,\n            units: d.units,\n            value: d[value],\n            groupIndex: i\n          });\n        });\n        domain.push(d[$_keys[0]]);\n      });\n\n      var red = \"#CE2A23\";\n\n      var colorMap = {\n        'Indie/Alternative': 0,\n        'Classic Rock': 1,\n        'Hip Hop': 2, //3th\n        'Punk': 3, //4th\n        'Metal': 4, //5th\n        'Electronic': 5,\n        'Jazz/Soul': 6,\n        'Other': 7 //1\n      };\n\n      var color = d3v3.scale.ordinal()\n      // .domain([0, _obj.data.length - 1]) >> changed this\n      .domain([0, 1, 2, 3, 4, 5, 6, 7]).range(['#ccebc5', '#f2f2f2', '#fbb4ae', '#fed9a6', '#fddaec', '#decbe4', '#f9f9bb', '#b3cde3']);\n\n      //if (_obj.label) {\n      d3v3.select(_obj.selector).append(\"div\").attr(\"class\", \"label\").text(_obj.label);\n      //}\n\n      // set up title\n      var title = d3v3.select($_selector).append(\"div\");\n\n      // add legend\n      if ($_useLegend) {\n        var legend = d3v3.select('.waffle_legend').append(\"div\").attr(\"class\", \"legend\");\n\n        var legendItem = legend.selectAll(\"div\").data(_obj.data);\n\n        legendItem.enter().append(\"div\").attr(\"class\", function (d, i) {\n          return \"legend_item legend_item_\" + (i + 1);\n        });\n\n        var legendIcon = legendItem.append(\"div\").attr(\"class\", \"legend_item_icon\").style(\"background-color\", function (d, i) {\n          return color(i);\n          // }\n        });\n\n        if (_obj.rounded) {\n          legendIcon.style(\"border-radius\", \"100%\"); // circles\n        }\n\n        legendItem.append(\"span\").attr(\"class\", \"legend_item_text\").text(function (d) {\n          return d[$_keys[0]];\n        });\n      }\n\n      var width = _obj.size * _obj.columns + _obj.columns * _obj.gap - _obj.gap;\n      var height = _obj.size * _obj.rows + _obj.rows * _obj.gap - _obj.gap;\n\n      if ($_useWidth) {\n        width = d3v3.select(_obj.selector).node().getBoundingClientRect().width;\n      }\n\n      var svg = d3v3.selectAll(_obj.selector).append(\"svg\").attr(\"class\", \"waffle\").attr(\"width\", width).attr(\"height\", height);\n\n      var g = svg.append(\"g\").attr(\"transform\", \"translate(0,0)\");\n\n      // insert dem items\n\n      var item = g.selectAll(\".unit\").data(formattedData);\n\n      item.enter().append(\"rect\").attr(\"class\", \"unit\").attr(\"width\", _obj.size).attr(\"height\", _obj.size).attr(\"fill\", function (d) {\n        return color(d.groupIndex);\n      })\n      // .on('mouseover', mouseover)\n      .attr(\"x\", function (d, i) {\n        var col = Math.floor(i / _obj.rows);\n        return col * _obj.size + col * _obj.gap;\n      }).attr(\"y\", function (d, i) {\n        var row = i % _obj.rows;\n        return _obj.rows * (_obj.size + _obj.gap) - (row * _obj.size + row * _obj.gap) - _obj.size - _obj.gap;\n      }).append(\"title\").text(function (d, i) {\n        // console.log(d);\n        return _obj.data[d.groupIndex][$_keys[0]] + \": \" + Math.round(d.units / formattedData.length * 100) + \"%\";\n      }).attr(\"stroke\", \"black\").attr(\"stroke-width\", 2);\n\n      // tooltip\n      var tooltip = d3.select($_selector).append(\"div\").attr(\"class\", \"tooltip\").style(\"opacity\", 0);\n\n      // d3v3.selectAll('.unit')\n      //   .on('mouseover', function(d) {\n      //     console.log(Math.round((d.units / formattedData.length) * 100) + \"%\");\n      //     tooltip.transition()\n      //             .duration(200)\n      //             .style(\"opacity\", .9);\n      //             console.log(_obj.data[d.groupIndex]);\n      //     tooltip.html(_obj.data[d.groupIndex][$_keys[0]] + \": \" + Math.round((d.units / formattedData.length) * 100) + \"%\")\n      //       .style(\"left\", (d3v3.event.pageX) + \"px\")\n      //       .style(\"top\", (d3v3.event.pageY - 10) + \"px\");\n      //   })\n      //   .on(\"mouseout\", function(d) {\n      //         tooltip.transition()\n      //             .style(\"opacity\", 0);\n      //     });;\n\n\n      if (_obj.rounded) {\n        item.attr(\"rx\", _obj.size / 2).attr(\"ry\", _obj.size / 2);\n      }\n\n      title.append('div').append(\"p\").attr('class', 'waffle_title').text($_title);\n    }\n\n    generatedWaffleChart.selector = function (value) {\n      if (!arguments.length) {\n        return $_selector;\n      }\n      $_selector = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.title = function (value) {\n      if (!arguments.length) {\n        return $_title;\n      }\n      $_title = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.data = function (value) {\n      if (!arguments.length) {\n        return $_data;\n      }\n      $_data = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.useWidth = function (value) {\n      if (!arguments.length) {\n        return $_useWidth;\n      }\n      $_useWidth = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.useLegend = function (value) {\n      if (!arguments.length) {\n        return $_useLegend;\n      }\n      $_useLegend = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.label = function (value) {\n      if (!arguments.length) {\n        return $_label;\n      }\n      $_label = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.size = function (value) {\n      if (!arguments.length) {\n        return $_cellSize;\n      }\n      $_cellSize = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.gap = function (value) {\n      if (!arguments.length) {\n        return $_cellGap;\n      }\n      $_cellGap = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.rows = function (value) {\n      if (!arguments.length) {\n        return $_rows;\n      }\n      $_rows = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.columns = function (value) {\n      if (!arguments.length) {\n        return $_columns;\n      }\n      $_columns = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.rounded = function (value) {\n      if (!arguments.length) {\n        return $_rounded;\n      }\n      $_rounded = value;\n      return generatedWaffleChart;\n    };\n\n    return generatedWaffleChart;\n  };\n\n  d3v3.csv(\"assets/waffle.csv\", function (err, data) {\n    if (err) {\n      console.error(err);\n    } else {\n      var companyNest = d3.nest().key(function (d) {\n        return d.company;\n      }).entries(data);\n\n      // var waffleCompany = d3.select(\".waffle_new\")\n      //   .selectAll(\"div\")\n      //   .data(companyNest)\n      //   .enter()\n      //   .append(\"div\")\n      //   .attr(\"class\",\"waffle-company\")\n      //   ;\n\n      // waffleCompany.append(\"p\")\n      //   .attr(\"class\",\"waffle-company-name\")\n      //   .text(function(d){\n      //     return d.key;\n      //   })\n\n      // var boxesPerColumn = 34;\n      // var columnWidth = 4;\n      //\n      // waffleCompany\n      //   .style(\"width\",function(d){\n      //     var numberOfBoxes = d3.sum(d.values,function(d){return +d.value});\n      //     var columns = numberOfBoxes/boxesPerColumn;\n      //     return columns*columnWidth+\"px\"\n      //   })\n      //   .style(\"height\",function(d){\n      //     return boxesPerColumn*columnWidth+\"px\"\n      //   })\n      //   // .append(\"div\")\n      //   // .attr(\"class\",\"waffle-company-box-container\")\n      //   .selectAll(\"div\")\n      //   .data(function(d){\n      //     console.log(d.values);\n      //     var boxes = d3.range(d3.sum(d.values,function(d){return +d.value}));\n      //     console.log(boxes);\n      //     return boxes;\n      //     // boxes.map(function(d){\n      //     //\n      //     // })\n      //   })\n      //   .enter()\n      //   .append(\"div\")\n      //   .attr(\"class\",\"waffle-company-box\")\n      //   .style(\"transform\",function(d,i){\n      //     var xPos = Math.floor(i/boxesPerColumn) * 4;\n      //     var yPos = i % boxesPerColumn * 4;\n      //     return \"translate(\"+xPos+\"px,\"+yPos+\"px)\"\n      //   })\n      //   ;\n\n      for (var company in companyNest) {\n        var dataPoints = companyNest[company].values;\n        dataPoints = dataPoints.map(function (d) {\n          return { source: d.source, value: d.value };\n        });\n\n        var companyName = companyNest[company].key;\n        var string = \".waffle_row_\" + (+company + 1);\n        var legendUse = false;\n        if (company == 0) {\n          legendUse = true;\n        }\n\n        var waffle = new WaffleChart().selector(string).title(companyName).data(dataPoints).useWidth(false).useLegend(legendUse).size(5).gap(0).rows(10).columns(25).rounded(false)();\n      }\n\n      // var waffle = new WaffleChart()\n      //   .selector(\".waffle_row_1\")\n      //   .title('411')\n      //   .data(data)\n      //   .useWidth(false).useLegend(false)\n      //   .size(5)\n      //   .gap(0)\n      //   .rows(20)\n      //   .columns(50)\n      //   .rounded(false)();\n    }\n  });\n}\n\nexports.default = { init: init, resize: resize };//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvd2FmZmxlLmpzP2E5ZTUiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gcmVzaXplKCkge31cblxuZnVuY3Rpb24gaW5pdCgpIHtcblxudmFyIFdhZmZsZUNoYXJ0ID0gZnVuY3Rpb24oKSB7XG5cbiAgdmFyICRfc2VsZWN0b3IsXG4gICAgICAkX3RpdGxlLFxuICAgICAgJF9kYXRhLFxuICAgICAgJF9sYWJlbCxcbiAgICAgICRfY2VsbFNpemUsXG4gICAgICAkX2NlbGxHYXAsXG4gICAgICAkX3Jvd3MsXG4gICAgICAkX2NvbHVtbnMsXG4gICAgICAkX3JvdW5kZWQsXG4gICAgICAkX2tleXMsXG4gICAgICAkX3VzZVdpZHRoLFxuICAgICAgJF91c2VMZWdlbmQ7XG5cbiAgdmFyIGRlZmF1bHRzID0ge1xuICAgIHNpemU6IDMsXG4gICAgcm93czogMjUsXG4gICAgY29sdW1uczogNTAsXG4gICAgcm91bmRlZDogZmFsc2UsXG4gICAgZ2FwOiAyLFxuICAgIHVzZUxlZ2VuZDogZmFsc2VcbiAgfTtcblxuICBmdW5jdGlvbiBnZW5lcmF0ZWRXYWZmbGVDaGFydCgpIHtcblxuICAgICRfa2V5cyA9IGQzdjMua2V5cygkX2RhdGFbMF0pO1xuXG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIHNlbGVjdG9yOiAkX3NlbGVjdG9yLFxuICAgICAgdGl0bGU6ICRfdGl0bGUsXG4gICAgICBkYXRhOiAkX2RhdGEsXG4gICAgICBsYWJlbDogJF9sYWJlbCxcbiAgICAgIHNpemU6ICRfY2VsbFNpemUsXG4gICAgICBnYXA6ICRfY2VsbEdhcCxcbiAgICAgIHJvd3M6ICRfcm93cyxcbiAgICAgIGNvbHVtbnM6ICRfY29sdW1ucyxcbiAgICAgIHJvdW5kZWQ6ICRfcm91bmRlZFxuICAgIH07XG5cbiAgICBkcmF3V2FmZmxlQ2hhcnQob2JqKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gZHJhd1dhZmZsZUNoYXJ0KF9vYmopIHtcblxuICAgIGlmICghX29iai5zaXplKSB7IF9vYmouc2l6ZSA9IGRlZmF1bHRzLnNpemU7IH1cbiAgICBpZiAoIV9vYmoucm93cykgeyBfb2JqLnJvd3MgPSBkZWZhdWx0cy5yb3dzOyB9XG4gICAgaWYgKCFfb2JqLmNvbHVtbnMpIHsgX29iai5jb2x1bW5zID0gZGVmYXVsdHMuY29sdW1uczsgfVxuICAgIGlmIChfb2JqLmdhcCA9PT0gdW5kZWZpbmVkKSB7IF9vYmouZ2FwID0gZGVmYXVsdHMuZ2FwOyB9XG4gICAgaWYgKF9vYmoucm91bmRlZCA9PT0gdW5kZWZpbmVkKSB7IF9vYmouY29sdW1ucyA9IGRlZmF1bHRzLnJvdW5kZWQ7IH1cblxuICAgIHZhciBmb3JtYXR0ZWREYXRhID0gW107XG4gICAgdmFyIGRvbWFpbiA9IFtdO1xuICAgIHZhciB2YWx1ZSA9ICRfa2V5c1skX2tleXMubGVuZ3RoIC0gMV07XG4gICAgdmFyIHRvdGFsID0gZDN2My5zdW0oX29iai5kYXRhLCBmdW5jdGlvbihkKSB7IHJldHVybiBkW3ZhbHVlXTsgfSk7XG5cbiAgICBpZiAoJF91c2VXaWR0aCkge1xuICAgICAgdmFyIGZvcmNlZFdpZHRoID0gZDN2My5zZWxlY3QoX29iai5zZWxlY3Rvcikubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgX29iai5jb2x1bW5zID0gTWF0aC5mbG9vcihmb3JjZWRXaWR0aCAvIChfb2JqLnNpemUgKyBfb2JqLmdhcCkpO1xuICAgIH1cblxuICAgIHZhciBzcXVhcmVWYWwgPSB0b3RhbCAvIChfb2JqLnJvd3MgKiBfb2JqLmNvbHVtbnMpO1xuXG4gICAgX29iai5kYXRhLmZvckVhY2goZnVuY3Rpb24oZCwgaSkge1xuICAgICAgZFt2YWx1ZV0gPSArZFt2YWx1ZV07XG4gICAgICBkLnVuaXRzID0gTWF0aC5mbG9vcihkW3ZhbHVlXSAvIHNxdWFyZVZhbCk7XG4gICAgICBBcnJheShkLnVuaXRzICsgMSkuam9pbigxKS5zcGxpdCgnJykubWFwKGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3JtYXR0ZWREYXRhLnB1c2goe1xuICAgICAgICAgIHNxdWFyZVZhbDogc3F1YXJlVmFsLFxuICAgICAgICAgIHVuaXRzOiBkLnVuaXRzLFxuICAgICAgICAgIHZhbHVlOiBkW3ZhbHVlXSxcbiAgICAgICAgICBncm91cEluZGV4OiBpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBkb21haW4ucHVzaChkWyRfa2V5c1swXV0pO1xuICAgIH0pO1xuXG4gICAgdmFyIHJlZCA9IFwiI0NFMkEyM1wiO1xuXG4gICAgdmFyIGNvbG9yTWFwID0ge1xuICAgICAgJ0luZGllL0FsdGVybmF0aXZlJzogMCxcbiAgICAgICdDbGFzc2ljIFJvY2snOiAxLFxuICAgICAgJ0hpcCBIb3AnOiAyLCAvLzN0aFxuICAgICAgJ1B1bmsnOiAzLCAvLzR0aFxuICAgICAgJ01ldGFsJzogNCwgLy81dGhcbiAgICAgICdFbGVjdHJvbmljJzogNSxcbiAgICAgICdKYXp6L1NvdWwnOiA2LFxuICAgICAgJ090aGVyJzogNyAvLzFcbiAgICB9O1xuXG4gICAgdmFyIGNvbG9yID0gZDN2My5zY2FsZS5vcmRpbmFsKClcbiAgICAgIC8vIC5kb21haW4oWzAsIF9vYmouZGF0YS5sZW5ndGggLSAxXSkgPj4gY2hhbmdlZCB0aGlzXG4gICAgICAuZG9tYWluKFswLCAxLCAyLCAzLCA0LCA1LCA2LCA3XSlcbiAgICAgIC5yYW5nZShbJyNjY2ViYzUnLCAnI2YyZjJmMicsICcjZmJiNGFlJywnI2ZlZDlhNicsJyNmZGRhZWMnLCcjZGVjYmU0JywgJyNmOWY5YmInLCcjYjNjZGUzJ10pO1xuXG4gICAgLy9pZiAoX29iai5sYWJlbCkge1xuICAgICAgZDN2My5zZWxlY3QoX29iai5zZWxlY3RvcilcbiAgICAgICAgLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGFiZWxcIilcbiAgICAgICAgLnRleHQoX29iai5sYWJlbCk7XG4gICAgLy99XG5cbiAgICAvLyBzZXQgdXAgdGl0bGVcbiAgICB2YXIgdGl0bGUgPSBkM3YzLnNlbGVjdCgkX3NlbGVjdG9yKVxuICAgICAgLmFwcGVuZChcImRpdlwiKTtcblxuICAgIC8vIGFkZCBsZWdlbmRcbiAgICBpZiAoJF91c2VMZWdlbmQpIHtcbiAgICAgICAgdmFyIGxlZ2VuZCA9IGQzdjMuc2VsZWN0KCcud2FmZmxlX2xlZ2VuZCcpXG4gICAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxlZ2VuZFwiKTtcblxuICAgICAgdmFyIGxlZ2VuZEl0ZW0gPSBsZWdlbmQuc2VsZWN0QWxsKFwiZGl2XCIpXG4gICAgICAgIC5kYXRhKF9vYmouZGF0YSk7XG5cbiAgICAgIGxlZ2VuZEl0ZW0uZW50ZXIoKVxuICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgIHJldHVybiBcImxlZ2VuZF9pdGVtIGxlZ2VuZF9pdGVtX1wiICsgKGkgKyAxKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHZhciBsZWdlbmRJY29uID0gbGVnZW5kSXRlbS5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxlZ2VuZF9pdGVtX2ljb25cIilcbiAgICAgICAgLnN0eWxlKFwiYmFja2dyb3VuZC1jb2xvclwiLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sb3IoaSk7XG4gICAgICAgICAvLyB9XG4gICAgICAgIH0pO1xuXG4gICAgICBpZiAoX29iai5yb3VuZGVkKSB7XG4gICAgICAgIGxlZ2VuZEljb24uc3R5bGUoXCJib3JkZXItcmFkaXVzXCIsIFwiMTAwJVwiKTsgLy8gY2lyY2xlc1xuICAgICAgfVxuXG4gICAgICBsZWdlbmRJdGVtLmFwcGVuZChcInNwYW5cIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxlZ2VuZF9pdGVtX3RleHRcIilcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZFskX2tleXNbMF1dOyB9KTtcbiAgICB9XG5cbiAgICB2YXIgd2lkdGggPSAoX29iai5zaXplICogX29iai5jb2x1bW5zKSArIChfb2JqLmNvbHVtbnMgKiBfb2JqLmdhcCkgLSBfb2JqLmdhcDtcbiAgICB2YXIgaGVpZ2h0ID0gKF9vYmouc2l6ZSAqIF9vYmoucm93cykgKyAoX29iai5yb3dzICogX29iai5nYXApIC0gX29iai5nYXA7XG5cbiAgICBpZiAoJF91c2VXaWR0aCkge1xuICAgICAgd2lkdGggPSBkM3YzLnNlbGVjdChfb2JqLnNlbGVjdG9yKS5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgfVxuXG4gICAgdmFyIHN2ZyA9IGQzdjMuc2VsZWN0QWxsKF9vYmouc2VsZWN0b3IpXG4gICAgICAuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwid2FmZmxlXCIpXG4gICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoKVxuICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KTtcblxuXG4gICAgdmFyIGcgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCwwKVwiKTtcblxuXG4gICAgLy8gaW5zZXJ0IGRlbSBpdGVtc1xuXG4gICAgdmFyIGl0ZW0gPSBnLnNlbGVjdEFsbChcIi51bml0XCIpXG4gICAgICAuZGF0YShmb3JtYXR0ZWREYXRhKTtcblxuICAgIGl0ZW0uZW50ZXIoKVxuICAgICAgLmFwcGVuZChcInJlY3RcIilcbiAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ1bml0XCIpXG4gICAgICAuYXR0cihcIndpZHRoXCIsIF9vYmouc2l6ZSlcbiAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIF9vYmouc2l6ZSlcbiAgICAgIC5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gY29sb3IoZC5ncm91cEluZGV4KTsgfSlcbiAgICAgIC8vIC5vbignbW91c2VvdmVyJywgbW91c2VvdmVyKVxuICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgdmFyIGNvbCA9IE1hdGguZmxvb3IoaSAvIF9vYmoucm93cyk7XG4gICAgICAgIHJldHVybiAoY29sICogKF9vYmouc2l6ZSkpICsgKGNvbCAqIF9vYmouZ2FwKTtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICB2YXIgcm93ID0gaSAlIF9vYmoucm93cztcbiAgICAgICAgcmV0dXJuIChfb2JqLnJvd3MgKiAoX29iai5zaXplICsgX29iai5nYXApKSAtICgocm93ICogX29iai5zaXplKSArIChyb3cgKiBfb2JqLmdhcCkpIC0gX29iai5zaXplIC0gX29iai5nYXA7XG4gICAgICB9KVxuICAgICAgLmFwcGVuZChcInRpdGxlXCIpXG4gICAgICAudGV4dChmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhkKTtcbiAgICAgICAgcmV0dXJuIF9vYmouZGF0YVtkLmdyb3VwSW5kZXhdWyRfa2V5c1swXV0gKyBcIjogXCIgKyBNYXRoLnJvdW5kKChkLnVuaXRzIC8gZm9ybWF0dGVkRGF0YS5sZW5ndGgpICogMTAwKSArIFwiJVwiO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiYmxhY2tcIilcbiAgICAgIC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsIDIpO1xuXG4gICAgLy8gdG9vbHRpcFxuICAgIHZhciB0b29sdGlwID0gZDMuc2VsZWN0KCRfc2VsZWN0b3IpLmFwcGVuZChcImRpdlwiKVxuICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ0b29sdGlwXCIpXG4gICAgLnN0eWxlKFwib3BhY2l0eVwiLCAwKTtcblxuICAgIC8vIGQzdjMuc2VsZWN0QWxsKCcudW5pdCcpXG4gICAgLy8gICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKGQpIHtcbiAgICAvLyAgICAgY29uc29sZS5sb2coTWF0aC5yb3VuZCgoZC51bml0cyAvIGZvcm1hdHRlZERhdGEubGVuZ3RoKSAqIDEwMCkgKyBcIiVcIik7XG4gICAgLy8gICAgIHRvb2x0aXAudHJhbnNpdGlvbigpXG4gICAgLy8gICAgICAgICAgICAgLmR1cmF0aW9uKDIwMClcbiAgICAvLyAgICAgICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIC45KTtcbiAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhfb2JqLmRhdGFbZC5ncm91cEluZGV4XSk7XG4gICAgLy8gICAgIHRvb2x0aXAuaHRtbChfb2JqLmRhdGFbZC5ncm91cEluZGV4XVskX2tleXNbMF1dICsgXCI6IFwiICsgTWF0aC5yb3VuZCgoZC51bml0cyAvIGZvcm1hdHRlZERhdGEubGVuZ3RoKSAqIDEwMCkgKyBcIiVcIilcbiAgICAvLyAgICAgICAuc3R5bGUoXCJsZWZ0XCIsIChkM3YzLmV2ZW50LnBhZ2VYKSArIFwicHhcIilcbiAgICAvLyAgICAgICAuc3R5bGUoXCJ0b3BcIiwgKGQzdjMuZXZlbnQucGFnZVkgLSAxMCkgKyBcInB4XCIpO1xuICAgIC8vICAgfSlcbiAgICAvLyAgIC5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAvLyAgICAgICAgIHRvb2x0aXAudHJhbnNpdGlvbigpXG4gICAgLy8gICAgICAgICAgICAgLnN0eWxlKFwib3BhY2l0eVwiLCAwKTtcbiAgICAvLyAgICAgfSk7O1xuXG5cblxuICAgIGlmIChfb2JqLnJvdW5kZWQpIHtcbiAgICAgIGl0ZW1cbiAgICAgICAgLmF0dHIoXCJyeFwiLCAoX29iai5zaXplIC8gMikpXG4gICAgICAgIC5hdHRyKFwicnlcIiwgKF9vYmouc2l6ZSAvIDIpKTtcbiAgICB9XG5cbiAgICB0aXRsZS5hcHBlbmQoJ2RpdicpXG4gICAgICAuYXBwZW5kKFwicFwiKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3dhZmZsZV90aXRsZScpXG4gICAgICAudGV4dCgkX3RpdGxlKTtcblxuICB9XG5cbiAgZ2VuZXJhdGVkV2FmZmxlQ2hhcnQuc2VsZWN0b3IgPSBmdW5jdGlvbih2YWx1ZSl7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7IHJldHVybiAkX3NlbGVjdG9yOyB9XG4gICAgJF9zZWxlY3RvciA9IHZhbHVlO1xuICAgIHJldHVybiBnZW5lcmF0ZWRXYWZmbGVDaGFydDtcbiAgfVxuXG4gIGdlbmVyYXRlZFdhZmZsZUNoYXJ0LnRpdGxlID0gZnVuY3Rpb24odmFsdWUpe1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgeyByZXR1cm4gJF90aXRsZTsgfVxuICAgICRfdGl0bGUgPSB2YWx1ZTtcbiAgICByZXR1cm4gZ2VuZXJhdGVkV2FmZmxlQ2hhcnQ7XG4gIH1cblxuICBnZW5lcmF0ZWRXYWZmbGVDaGFydC5kYXRhID0gZnVuY3Rpb24odmFsdWUpe1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgeyByZXR1cm4gJF9kYXRhOyB9XG4gICAgJF9kYXRhID0gdmFsdWU7XG4gICAgcmV0dXJuIGdlbmVyYXRlZFdhZmZsZUNoYXJ0O1xuICB9XG5cbiAgZ2VuZXJhdGVkV2FmZmxlQ2hhcnQudXNlV2lkdGggPSBmdW5jdGlvbih2YWx1ZSl7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7IHJldHVybiAkX3VzZVdpZHRoOyB9XG4gICAgJF91c2VXaWR0aCA9IHZhbHVlO1xuICAgIHJldHVybiBnZW5lcmF0ZWRXYWZmbGVDaGFydDtcbiAgfVxuXG4gIGdlbmVyYXRlZFdhZmZsZUNoYXJ0LnVzZUxlZ2VuZCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHsgcmV0dXJuICRfdXNlTGVnZW5kOyB9XG4gICAgJF91c2VMZWdlbmQgPSB2YWx1ZTtcbiAgICByZXR1cm4gZ2VuZXJhdGVkV2FmZmxlQ2hhcnQ7XG4gIH1cblxuICBnZW5lcmF0ZWRXYWZmbGVDaGFydC5sYWJlbCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHsgcmV0dXJuICRfbGFiZWw7IH1cbiAgICAkX2xhYmVsID0gdmFsdWU7XG4gICAgcmV0dXJuIGdlbmVyYXRlZFdhZmZsZUNoYXJ0O1xuICB9XG5cbiAgZ2VuZXJhdGVkV2FmZmxlQ2hhcnQuc2l6ZSA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHsgcmV0dXJuICRfY2VsbFNpemU7IH1cbiAgICAkX2NlbGxTaXplID0gdmFsdWU7XG4gICAgcmV0dXJuIGdlbmVyYXRlZFdhZmZsZUNoYXJ0O1xuICB9XG5cbiAgZ2VuZXJhdGVkV2FmZmxlQ2hhcnQuZ2FwID0gZnVuY3Rpb24odmFsdWUpe1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgeyByZXR1cm4gJF9jZWxsR2FwOyB9XG4gICAgJF9jZWxsR2FwID0gdmFsdWU7XG4gICAgcmV0dXJuIGdlbmVyYXRlZFdhZmZsZUNoYXJ0O1xuICB9XG5cbiAgZ2VuZXJhdGVkV2FmZmxlQ2hhcnQucm93cyA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHsgcmV0dXJuICRfcm93czsgfVxuICAgICRfcm93cyA9IHZhbHVlO1xuICAgIHJldHVybiBnZW5lcmF0ZWRXYWZmbGVDaGFydDtcbiAgfVxuXG4gIGdlbmVyYXRlZFdhZmZsZUNoYXJ0LmNvbHVtbnMgPSBmdW5jdGlvbih2YWx1ZSl7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7IHJldHVybiAkX2NvbHVtbnM7IH1cbiAgICAkX2NvbHVtbnMgPSB2YWx1ZTtcbiAgICByZXR1cm4gZ2VuZXJhdGVkV2FmZmxlQ2hhcnQ7XG4gIH1cblxuICBnZW5lcmF0ZWRXYWZmbGVDaGFydC5yb3VuZGVkID0gZnVuY3Rpb24odmFsdWUpe1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgeyByZXR1cm4gJF9yb3VuZGVkOyB9XG4gICAgJF9yb3VuZGVkID0gdmFsdWU7XG4gICAgcmV0dXJuIGdlbmVyYXRlZFdhZmZsZUNoYXJ0O1xuICB9XG5cbiAgcmV0dXJuIGdlbmVyYXRlZFdhZmZsZUNoYXJ0O1xuXG59O1xuXG5cbmQzdjMuY3N2KFwiYXNzZXRzL3dhZmZsZS5jc3ZcIiwgZnVuY3Rpb24oZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjb21wYW55TmVzdCA9IGQzLm5lc3QoKS5rZXkoZnVuY3Rpb24oZCl7XG4gICAgICAgICAgcmV0dXJuIGQuY29tcGFueTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVudHJpZXMoZGF0YSlcblxuICAgICAgICAvLyB2YXIgd2FmZmxlQ29tcGFueSA9IGQzLnNlbGVjdChcIi53YWZmbGVfbmV3XCIpXG4gICAgICAgIC8vICAgLnNlbGVjdEFsbChcImRpdlwiKVxuICAgICAgICAvLyAgIC5kYXRhKGNvbXBhbnlOZXN0KVxuICAgICAgICAvLyAgIC5lbnRlcigpXG4gICAgICAgIC8vICAgLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAvLyAgIC5hdHRyKFwiY2xhc3NcIixcIndhZmZsZS1jb21wYW55XCIpXG4gICAgICAgIC8vICAgO1xuXG4gICAgICAgIC8vIHdhZmZsZUNvbXBhbnkuYXBwZW5kKFwicFwiKVxuICAgICAgICAvLyAgIC5hdHRyKFwiY2xhc3NcIixcIndhZmZsZS1jb21wYW55LW5hbWVcIilcbiAgICAgICAgLy8gICAudGV4dChmdW5jdGlvbihkKXtcbiAgICAgICAgLy8gICAgIHJldHVybiBkLmtleTtcbiAgICAgICAgLy8gICB9KVxuXG4gICAgICAgIC8vIHZhciBib3hlc1BlckNvbHVtbiA9IDM0O1xuICAgICAgICAvLyB2YXIgY29sdW1uV2lkdGggPSA0O1xuICAgICAgICAvL1xuICAgICAgICAvLyB3YWZmbGVDb21wYW55XG4gICAgICAgIC8vICAgLnN0eWxlKFwid2lkdGhcIixmdW5jdGlvbihkKXtcbiAgICAgICAgLy8gICAgIHZhciBudW1iZXJPZkJveGVzID0gZDMuc3VtKGQudmFsdWVzLGZ1bmN0aW9uKGQpe3JldHVybiArZC52YWx1ZX0pO1xuICAgICAgICAvLyAgICAgdmFyIGNvbHVtbnMgPSBudW1iZXJPZkJveGVzL2JveGVzUGVyQ29sdW1uO1xuICAgICAgICAvLyAgICAgcmV0dXJuIGNvbHVtbnMqY29sdW1uV2lkdGgrXCJweFwiXG4gICAgICAgIC8vICAgfSlcbiAgICAgICAgLy8gICAuc3R5bGUoXCJoZWlnaHRcIixmdW5jdGlvbihkKXtcbiAgICAgICAgLy8gICAgIHJldHVybiBib3hlc1BlckNvbHVtbipjb2x1bW5XaWR0aCtcInB4XCJcbiAgICAgICAgLy8gICB9KVxuICAgICAgICAvLyAgIC8vIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLy8gICAvLyAuYXR0cihcImNsYXNzXCIsXCJ3YWZmbGUtY29tcGFueS1ib3gtY29udGFpbmVyXCIpXG4gICAgICAgIC8vICAgLnNlbGVjdEFsbChcImRpdlwiKVxuICAgICAgICAvLyAgIC5kYXRhKGZ1bmN0aW9uKGQpe1xuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coZC52YWx1ZXMpO1xuICAgICAgICAvLyAgICAgdmFyIGJveGVzID0gZDMucmFuZ2UoZDMuc3VtKGQudmFsdWVzLGZ1bmN0aW9uKGQpe3JldHVybiArZC52YWx1ZX0pKTtcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGJveGVzKTtcbiAgICAgICAgLy8gICAgIHJldHVybiBib3hlcztcbiAgICAgICAgLy8gICAgIC8vIGJveGVzLm1hcChmdW5jdGlvbihkKXtcbiAgICAgICAgLy8gICAgIC8vXG4gICAgICAgIC8vICAgICAvLyB9KVxuICAgICAgICAvLyAgIH0pXG4gICAgICAgIC8vICAgLmVudGVyKClcbiAgICAgICAgLy8gICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgIC8vICAgLmF0dHIoXCJjbGFzc1wiLFwid2FmZmxlLWNvbXBhbnktYm94XCIpXG4gICAgICAgIC8vICAgLnN0eWxlKFwidHJhbnNmb3JtXCIsZnVuY3Rpb24oZCxpKXtcbiAgICAgICAgLy8gICAgIHZhciB4UG9zID0gTWF0aC5mbG9vcihpL2JveGVzUGVyQ29sdW1uKSAqIDQ7XG4gICAgICAgIC8vICAgICB2YXIgeVBvcyA9IGkgJSBib3hlc1BlckNvbHVtbiAqIDQ7XG4gICAgICAgIC8vICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIreFBvcytcInB4LFwiK3lQb3MrXCJweClcIlxuICAgICAgICAvLyAgIH0pXG4gICAgICAgIC8vICAgO1xuXG4gICAgICAgIGZvciAodmFyIGNvbXBhbnkgaW4gY29tcGFueU5lc3Qpe1xuICAgICAgICAgIHZhciBkYXRhUG9pbnRzID0gY29tcGFueU5lc3RbY29tcGFueV0udmFsdWVzO1xuICAgICAgICAgIGRhdGFQb2ludHMgPSBkYXRhUG9pbnRzLm1hcChmdW5jdGlvbihkKXtcbiAgICAgICAgICAgIHJldHVybiB7c291cmNlOmQuc291cmNlLHZhbHVlOmQudmFsdWV9XG4gICAgICAgICAgfSlcblxuICAgICAgICAgIHZhciBjb21wYW55TmFtZSA9IGNvbXBhbnlOZXN0W2NvbXBhbnldLmtleTtcbiAgICAgICAgICB2YXIgc3RyaW5nID0gXCIud2FmZmxlX3Jvd19cIisoK2NvbXBhbnkrMSk7XG4gICAgICAgICAgdmFyIGxlZ2VuZFVzZSA9IGZhbHNlO1xuICAgICAgICAgIGlmKGNvbXBhbnkgPT0gMCl7XG4gICAgICAgICAgICBsZWdlbmRVc2UgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciB3YWZmbGUgPSBuZXcgV2FmZmxlQ2hhcnQoKVxuICAgICAgICAgICAgLnNlbGVjdG9yKHN0cmluZylcbiAgICAgICAgICAgIC50aXRsZShjb21wYW55TmFtZSlcbiAgICAgICAgICAgIC5kYXRhKGRhdGFQb2ludHMpXG4gICAgICAgICAgICAudXNlV2lkdGgoZmFsc2UpLnVzZUxlZ2VuZChsZWdlbmRVc2UpXG4gICAgICAgICAgICAuc2l6ZSg1KVxuICAgICAgICAgICAgLmdhcCgwKVxuICAgICAgICAgICAgLnJvd3MoMTApXG4gICAgICAgICAgICAuY29sdW1ucygyNSlcbiAgICAgICAgICAgIC5yb3VuZGVkKGZhbHNlKSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFyIHdhZmZsZSA9IG5ldyBXYWZmbGVDaGFydCgpXG4gICAgICAgIC8vICAgLnNlbGVjdG9yKFwiLndhZmZsZV9yb3dfMVwiKVxuICAgICAgICAvLyAgIC50aXRsZSgnNDExJylcbiAgICAgICAgLy8gICAuZGF0YShkYXRhKVxuICAgICAgICAvLyAgIC51c2VXaWR0aChmYWxzZSkudXNlTGVnZW5kKGZhbHNlKVxuICAgICAgICAvLyAgIC5zaXplKDUpXG4gICAgICAgIC8vICAgLmdhcCgwKVxuICAgICAgICAvLyAgIC5yb3dzKDIwKVxuICAgICAgICAvLyAgIC5jb2x1bW5zKDUwKVxuICAgICAgICAvLyAgIC5yb3VuZGVkKGZhbHNlKSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBpbml0LCByZXNpemUgfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvd2FmZmxlLmpzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFDQTtBQVdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFVQTtBQUNBO0FBREE7QUFDQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUFBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7\n");

/***/ })
/******/ ]);